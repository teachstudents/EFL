<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçΩÔ∏è Kids Restaurant Creator! üé®</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Baloo 2', 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(45deg, #ff9a9e, #fecfef, #a8edea, #fed6e3, #d299c2, #fef9d7, #d4fc79);
            background-size: 800% 800%;
            animation: superRainbow 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        #background-emojis {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .floating-emoji {
            position: absolute;
            font-size: 3rem;
            opacity: 0.05; /* Reduced opacity for better visibility */
            animation: float 25s linear infinite;
            will-change: transform;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(-10vh) rotate(360deg); }
        }

        @keyframes superRainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 20px; /* Reduced margin */
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .title {
            font-size: 3.5rem;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #ffd93d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleRainbow 3s ease infinite;
            margin-bottom: 10px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        @keyframes titleRainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-size: 1.5rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px; /* Reduced gap */
            margin-bottom: 20px; /* Reduced margin */
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            border: none;
            padding: 8px 16px; /* Reduced padding */
            border-radius: 20px;
            font-size: 0.9rem; /* Reduced font size */
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 3px solid transparent;
        }

        .nav-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #ffd700, #ff8c00);
            border-color: #ff6b6b;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .page {
            display: none;
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            border: 5px solid #ffd700;
            min-height: 600px;
        }

        .page.active {
            display: block;
            animation: slideIn 0.8s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            font-size: 2.5rem;
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }

        .drop-zone {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 4px dashed #ffd700;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            min-height: 200px;
            text-align: center;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
        }

        .drop-zone.drag-over {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            border-color: #2ecc71;
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .drop-zone h3 {
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .dropped-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .dropped-item {
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 10px 15px;
            font-size: 1.5rem;
            animation: itemPop 0.5s ease;
            border: 2px solid rgba(255,255,255,0.3);
            cursor: pointer;
            text-transform: capitalize; /* Capitalize first letter for display */
        }

        @keyframes itemPop {
            0% { transform: scale(0); }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .emoji-palette {
            background: rgba(255,255,255,0.9);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .emoji-category {
            margin-bottom: 20px;
        }

        .emoji-category h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
        }

        .emoji-item {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border: 1px solid #ddd;
            border-radius: 15px;
            padding: 15px;
            font-size: 2rem;
            cursor: grab;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .emoji-item:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .emoji-item:active {
            cursor: grabbing;
            transform: scale(1.2);
        }

        .price-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .price-controls span:first-of-type {
             text-transform: capitalize;
        }

        .price-controls span {
             min-width: 80px;
             text-align: center;
             font-size: 1.2rem;
        }

        .price-dial {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ffd700, #ff8c00);
            border: 4px solid #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .price-dial:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .staff-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 20px;
            margin: 15px 0;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .staff-emoji {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 15px;
        }

        .staff-input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            text-align: center;
            background: rgba(255,255,255,0.9);
            margin-top: 10px;
            color: #333;
        }

        .time-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .time-card {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .time-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .time-card.selected {
            border-color: #ffd700;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            animation: pulse 1.5s infinite;
        }

        .country-flags {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .staff-country-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .staff-country-selector .flag-item {
            padding: 10px;
            background: rgba(255,255,255,0.8);
        }
        
        .staff-country-selector .flag-item .flag-emoji {
             font-size: 1.5rem;
             margin-bottom: 5px;
        }

        .flag-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 3px solid transparent;
        }
        
        .flag-emoji {
            font-family: "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", sans-serif;
        }

        .flag-item:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .flag-item.selected {
            border-color: #ffd700;
            background: linear-gradient(45deg, #ffd700, #ff8c00);
        }

        .flag-emoji {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .currency-display {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            margin: 15px 0;
        }

        .summary-card {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 15px 0;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .summary-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .menu-preview {
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            font-size: 1.1rem;
        }

        .menu-preview div {
            text-transform: capitalize;
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confettiFall 3s linear infinite;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ff6b6b;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            z-index: 2000;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }
            .navigation {
                gap: 5px; /* Further reduced gap */
            }
            .nav-btn {
                padding: 8px 12px; /* Further reduced padding */
                font-size: 0.8rem; /* Further reduced font size */
            }
            .emoji-grid {
                grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            }
            .emoji-item {
                font-size: 1.5rem;
                padding: 10px;
            }
            .price-dial {
                width: 45px;
                height: 45px;
            }
            .price-controls {
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div id="background-emojis"></div>
    <div id="notification" class="notification"></div>
    <div class="container">
        <div class="header">
            <h1 class="title" id="mainTitle">üçΩÔ∏è Kids Restaurant Creator! üé®</h1>
            <p class="subtitle" id="mainSubtitle">Create your amazing restaurant!</p>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showPage(event, 'setup')">üè™ Setup</button>
            <button class="nav-btn" onclick="showPage(event, 'menu')">üè† Menu</button>
            <button class="nav-btn" onclick="showPage(event, 'breakfast')">üåÖ Breakfast</button>
            <button class="nav-btn" onclick="showPage(event, 'lunch')">‚òÄÔ∏è Lunch</button>
            <button class="nav-btn" onclick="showPage(event, 'dinner')">üåô Dinner</button>
            <button class="nav-btn" onclick="showPage(event, 'prices')">üí∞ Prices</button>
            <button class="nav-btn" onclick="showPage(event, 'times')">‚è∞ Hours</button>
            <button class="nav-btn" onclick="showPage(event, 'staff')">üë• Staff</button>
            <button class="nav-btn" onclick="showPage(event, 'summary')">üìã Summary</button>
        </div>

        <!-- Restaurant Setup Page -->
        <div id="setup" class="page active">
            <h2 class="page-title">üè™ Setup Your Restaurant</h2>

            <div class="summary-card">
                <div class="summary-title">üéØ Tell Us About You & Your Restaurant</div>
                <div class="staff-card">
                    <div class="staff-emoji">üë§</div>
                    <h3 style="text-align: center;">Your Name</h3>
                    <input type="text" class="staff-input" placeholder="Enter your name" id="ownerName" oninput="updateNames()">
                </div>
                
                <div class="staff-card">
                    <div class="staff-emoji">üè™</div>
                    <h3 style="text-align: center;">Restaurant Name</h3>
                    <input type="text" class="staff-input" placeholder="Enter restaurant name" id="restaurantName" oninput="updateNames()">
                </div>
            </div>
        </div>

        <!-- Menu Overview Page -->
        <div id="menu" class="page">
            <h2 class="page-title">üè† Welcome to Your Restaurant!</h2>
            <div class="summary-card">
                <div class="summary-title">üéØ Your Mission</div>
                <p style="font-size: 1.2rem; text-align: center; line-height: 1.6;" id="missionText">
                    Create the most amazing restaurant ever! <span aria-hidden="true">üåü</span><br>
                    Drag and drop food emojis, set prices, pick opening hours, and hire your dream team! <span aria-hidden="true">üöÄ</span>
                </p>
            </div>
            
            <div class="summary-card">
                <div class="summary-title">üìä Restaurant Progress</div>
                <div id="progressDisplay" style="font-size: 1.1rem; line-height: 1.8;">
                    <div>üç≥ Breakfast Menu: <span id="breakfastCount">0</span> items</div>
                    <div>üçΩÔ∏è Lunch Menu: <span id="lunchCount">0</span> items</div>
                    <div>üåô Dinner Menu: <span id="dinnerCount">0</span> items</div>
                    <div>üë• Staff Hired: <span id="staffCount">0</span>/5</div>
                    <div>‚è∞ Hours Set: <span id="hoursCount">0</span>/4</div>
                </div>
            </div>
        </div>

        <!-- Breakfast Page -->
        <div id="breakfast" class="page">
            <h2 class="page-title">üåÖ Create Breakfast Menu</h2>
            
            <div class="drop-zone" id="breakfastFood" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <h3>üç≥ Breakfast Foods</h3>
                <p>Drag breakfast foods here!</p>
                <div class="dropped-items" id="breakfastFoodItems"></div>
            </div>

            <div class="drop-zone" id="breakfastDrinks" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <h3>‚òï Breakfast Drinks</h3>
                <p>Drag drinks here!</p>
                <div class="dropped-items" id="breakfastDrinkItems"></div>
            </div>

            <div class="emoji-palette">
                <div class="emoji-category">
                    <h4>üç≥ Foods</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•û" data-name="pancakes">ü•û</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üßá" data-name="waffles">üßá</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üç≥" data-name="eggs">üç≥</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ì" data-name="bacon">ü•ì</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ê" data-name="croissant">ü•ê</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ñ" data-name="baguette">ü•ñ</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•£" data-name="cereal">ü•£</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçû" data-name="toast">üçû</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ë" data-name="avocado">ü•ë</button>
                    </div>
                </div>
                 <div class="emoji-category">
                    <h4>üçì Fruits</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçì" data-name="strawberry">üçì</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçå" data-name="banana">üçå</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçá" data-name="grapes">üçá</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçé" data-name="apple">üçé</button>
                    </div>
                </div>
                <div class="emoji-category">
                    <h4>‚òï Drinks</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="‚òï" data-name="coffee">‚òï</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•õ" data-name="milk">ü•õ</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üßÉ" data-name="juice">üßÉ</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçµ" data-name="tea">üçµ</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üßã" data-name="bubble tea">üßã</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lunch Page -->
        <div id="lunch" class="page">
            <h2 class="page-title">‚òÄÔ∏è Create Lunch Menu</h2>
            
            <div class="drop-zone" id="lunchFood" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <h3>üçΩÔ∏è Lunch Foods</h3>
                <p>Drag lunch foods here!</p>
                <div class="dropped-items" id="lunchFoodItems"></div>
            </div>

            <div class="drop-zone" id="lunchDrinks" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <h3>ü•§ Lunch Drinks</h3>
                <p>Drag drinks here!</p>
                <div class="dropped-items" id="lunchDrinkItems"></div>
            </div>

            <div class="emoji-palette">
                <div class="emoji-category">
                    <h4>üçΩÔ∏è Foods</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçî" data-name="burger">üçî</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçï" data-name="pizza">üçï</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•™" data-name="sandwich">ü•™</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ó" data-name="salad">ü•ó</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üåÆ" data-name="taco">üåÆ</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçü" data-name="fries">üçü</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•®" data-name="pretzel">ü•®</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçú" data-name="noodles">üçú</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçô" data-name="rice ball">üçô</button>
                    </div>
                </div>
                 <div class="emoji-category">
                    <h4>üçâ Fruits</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçâ" data-name="watermelon">üçâ</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçä" data-name="orange">üçä</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçç" data-name="pineapple">üçç</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ù" data-name="kiwi">ü•ù</button>
                    </div>
                </div>
                <div class="emoji-category">
                    <h4>ü•§ Drinks</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•§" data-name="soda">ü•§</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üíß" data-name="water">üíß</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üßã" data-name="bubble tea">üßã</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçã" data-name="lemonade">üçã</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü••" data-name="coconut water">ü••</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dinner Page -->
        <div id="dinner" class="page">
            <h2 class="page-title">üåô Create Dinner Menu</h2>
            
            <div class="drop-zone" id="dinnerFood" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <h3>üçΩÔ∏è Dinner Foods</h3>
                <p>Drag dinner foods here!</p>
                <div class="dropped-items" id="dinnerFoodItems"></div>
            </div>

            <div class="drop-zone" id="dinnerDrinks" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <h3>üç∑ Dinner Drinks</h3>
                <p>Drag drinks here!</p>
                <div class="dropped-items" id="dinnerDrinkItems"></div>
            </div>

            <div class="emoji-palette">
                <div class="emoji-category">
                    <h4>üçΩÔ∏è Foods</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•©" data-name="steak">ü•©</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçó" data-name="chicken">üçó</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçù" data-name="pasta">üçù</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçõ" data-name="curry">üçõ</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üç£" data-name="sushi">üç£</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ò" data-name="paella">ü•ò</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü•ü" data-name="dumpling">ü•ü</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="ü¶û" data-name="lobster">ü¶û</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçö" data-name="rice">üçö</button>
                    </div>
                </div>
                 <div class="emoji-category">
                    <h4>üç∞ Desserts</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üç∞" data-name="cake">üç∞</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üç®" data-name="ice cream">üç®</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçí" data-name="cherries">üçí</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üç©" data-name="donut">üç©</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üç™" data-name="cookie">üç™</button>
                    </div>
                </div>
                <div class="emoji-category">
                    <h4>üç∑ Drinks</h4>
                    <div class="emoji-grid">
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üç∑" data-name="wine">üç∑</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üíß" data-name="water">üíß</button>
                        <button class="emoji-item" draggable="true" ondragstart="drag(event)" data-emoji="üçπ" data-name="juice">üçπ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Prices Page -->
        <div id="prices" class="page">
            <h2 class="page-title">üí∞ Set Your Prices</h2>
            
            <div class="currency-display" id="currencyDisplay">
                Currency: USD ($)
            </div>

            <div id="pricesList">
                <!-- Price controls will be generated here -->
            </div>
        </div>

        <!-- Times Page -->
        <div id="times" class="page">
            <h2 class="page-title">‚è∞ Set Opening Hours</h2>
            
            <div class="time-selector">
                <div class="time-card" onclick="toggleTime(this, 'breakfast')">
                    <h3>üåÖ Breakfast</h3>
                    <div class="price-controls">
                        <div class="price-dial" onclick="adjustTime('breakfast', 'start', -5)">-</div>
                        <span id="breakfast-start">6:00 AM</span>
                        <div class="price-dial" onclick="adjustTime('breakfast', 'start', 5)">+</div>
                        <span>to</span>
                        <div class="price-dial" onclick="adjustTime('breakfast', 'end', -5)">-</div>
                        <span id="breakfast-end">11:00 AM</span>
                        <div class="price-dial" onclick="adjustTime('breakfast', 'end', 5)">+</div>
                    </div>
                </div>
                <div class="time-card" onclick="toggleTime(this, 'brunch')">
                    <h3>ü•ê Brunch</h3>
                    <div class="price-controls">
                        <div class="price-dial" onclick="adjustTime('brunch', 'start', -5)">-</div>
                        <span id="brunch-start">10:00 AM</span>
                        <div class="price-dial" onclick="adjustTime('brunch', 'start', 5)">+</div>
                        <span>to</span>
                        <div class="price-dial" onclick="adjustTime('brunch', 'end', -5)">-</div>
                        <span id="brunch-end">2:00 PM</span>
                        <div class="price-dial" onclick="adjustTime('brunch', 'end', 5)">+</div>
                    </div>
                </div>
                <div class="time-card" onclick="toggleTime(this, 'lunch')">
                    <h3>‚òÄÔ∏è Lunch</h3>
                    <div class="price-controls">
                        <div class="price-dial" onclick="adjustTime('lunch', 'start', -5)">-</div>
                        <span id="lunch-start">11:00 AM</span>
                        <div class="price-dial" onclick="adjustTime('lunch', 'start', 5)">+</div>
                        <span>to</span>
                        <div class="price-dial" onclick="adjustTime('lunch', 'end', -5)">-</div>
                        <span id="lunch-end">4:00 PM</span>
                        <div class="price-dial" onclick="adjustTime('lunch', 'end', 5)">+</div>
                    </div>
                </div>
                <div class="time-card" onclick="toggleTime(this, 'dinner')">
                    <h3>üåô Dinner</h3>
                    <div class="price-controls">
                        <div class="price-dial" onclick="adjustTime('dinner', 'start', -5)">-</div>
                        <span id="dinner-start">5:00 PM</span>
                        <div class="price-dial" onclick="adjustTime('dinner', 'start', 5)">+</div>
                        <span>to</span>
                        <div class="price-dial" onclick="adjustTime('dinner', 'end', -5)">-</div>
                        <span id="dinner-end">10:00 PM</span>
                        <div class="price-dial" onclick="adjustTime('dinner', 'end', 5)">+</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Staff Page -->
        <div id="staff" class="page">
            <h2 class="page-title">üë• Hire Your Dream Team</h2>
            
            <div class="staff-card">
                <div class="staff-emoji">üë®‚Äçüç≥</div>
                <h3 style="text-align: center;">Head Chef</h3>
                <input type="text" class="staff-input" placeholder="Enter chef's name" id="chefName" data-role="chef">
                <div class="staff-country-selector">
                     <div class="flag-item" onclick="selectStaffCountry(this, 'chef', 'de-DE')"><div class="flag-emoji">üá©üá™</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'chef', 'es-ES')"><div class="flag-emoji">üá™üá∏</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'chef', 'fr-FR')"><div class="flag-emoji">üá´üá∑</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'chef', 'zh-CN')"><div class="flag-emoji">üá®üá≥</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'chef', 'en-AU')"><div class="flag-emoji">üá¶üá∫</div></div>
                </div>
            </div>

            <div class="staff-card">
                <div class="staff-emoji">üë©‚Äçüç≥</div>
                <h3 style="text-align: center;">Cook</h3>
                <input type="text" class="staff-input" placeholder="Enter cook's name" id="cookName" data-role="cook">
                 <div class="staff-country-selector">
                     <div class="flag-item" onclick="selectStaffCountry(this, 'cook', 'de-DE')"><div class="flag-emoji">üá©üá™</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'cook', 'es-ES')"><div class="flag-emoji">üá™üá∏</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'cook', 'fr-FR')"><div class="flag-emoji">üá´üá∑</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'cook', 'zh-CN')"><div class="flag-emoji">üá®üá≥</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'cook', 'en-AU')"><div class="flag-emoji">üá¶üá∫</div></div>
                </div>
            </div>

            <div class="staff-card">
                <div class="staff-emoji">üë®‚Äçüíº</div>
                <h3 style="text-align: center;">Manager</h3>
                <input type="text" class="staff-input" placeholder="Enter manager's name" id="managerName" data-role="manager">
                 <div class="staff-country-selector">
                     <div class="flag-item" onclick="selectStaffCountry(this, 'manager', 'de-DE')"><div class="flag-emoji">üá©üá™</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'manager', 'es-ES')"><div class="flag-emoji">üá™üá∏</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'manager', 'fr-FR')"><div class="flag-emoji">üá´üá∑</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'manager', 'zh-CN')"><div class="flag-emoji">üá®üá≥</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'manager', 'en-AU')"><div class="flag-emoji">üá¶üá∫</div></div>
                </div>
            </div>
             <div class="staff-card">
                <div class="staff-emoji">ü§µ</div>
                <h3 style="text-align: center;">Waiter</h3>
                <input type="text" class="staff-input" placeholder="Enter waiter's name" id="waiterName" data-role="waiter">
                 <div class="staff-country-selector">
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waiter', 'de-DE')"><div class="flag-emoji">üá©üá™</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waiter', 'es-ES')"><div class="flag-emoji">üá™üá∏</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waiter', 'fr-FR')"><div class="flag-emoji">üá´üá∑</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waiter', 'zh-CN')"><div class="flag-emoji">üá®üá≥</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waiter', 'en-AU')"><div class="flag-emoji">üá¶üá∫</div></div>
                </div>
            </div>
             <div class="staff-card">
                <div class="staff-emoji">ü§µ‚Äç‚ôÄÔ∏è</div>
                <h3 style="text-align: center;">Waitress</h3>
                <input type="text" class="staff-input" placeholder="Enter waitress's name" id="waitressName" data-role="waitress">
                 <div class="staff-country-selector">
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waitress', 'de-DE')"><div class="flag-emoji">üá©üá™</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waitress', 'es-ES')"><div class="flag-emoji">üá™üá∏</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waitress', 'fr-FR')"><div class="flag-emoji">üá´üá∑</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waitress', 'zh-CN')"><div class="flag-emoji">üá®üá≥</div></div>
                     <div class="flag-item" onclick="selectStaffCountry(this, 'waitress', 'en-AU')"><div class="flag-emoji">üá¶üá∫</div></div>
                </div>
            </div>
        </div>

        <!-- Summary Page -->
        <div id="summary" class="page">
            <h2 class="page-title">üìã Your Amazing Restaurant!</h2>
            <div id="restaurantSummary"></div>
        </div>
    </div>

    <!-- Celebration Elements -->
    <div class="celebration" id="celebration"></div>

    <script>
        // =================================================================================
        // --- 1. GLOBAL STATE & DATA ---
        // =================================================================================
        
        let restaurant = {
            breakfast: { foods: [], drinks: [] },
            lunch: { foods: [], drinks: [] },
            dinner: { foods: [], drinks: [] },
            prices: {},
            currency: { symbol: '$', code: 'USD', name: 'dollars' },
            staff: {
                chef: { name: '', lang: '' },
                cook: { name: '', lang: '' },
                manager: { name: '', lang: '' },
                waiter: { name: '', lang: '' },
                waitress: { name: '', lang: '' },
            },
            owner: '',
            restaurantName: '',
            openingHours: [],
            times: {
                breakfast: { start: 360, end: 660 }, 
                brunch: { start: 600, end: 840 },  
                lunch: { start: 660, end: 960 },   
                dinner: { start: 1020, end: 1320 } 
            }
        };

        let currentPage = 'setup';
        let chosenStaffLangs = new Set();
        
        const staffScripts = {
            'de-DE': { english: "Hello from Germany!", native: "Ich liebe es, leckere Brezeln und Bratwurst zu machen." },
            'es-ES': { english: "Hello from Spain!", native: "¬°Tengo muchas ganas de cocinarte una paella!" },
            'fr-FR': { english: "Bonjour from France!", native: "Je recommande les croissants et le coq au vin." },
            'zh-CN': { english: "N«ê h«éo from China!", native: "Êàë‰ª¨ÂêÉÁÇπÈ•∫Â≠êÂíåÂåó‰∫¨ÁÉ§È∏≠Âêß„ÄÇ" },
            'en-AU': { english: "G'day from Australia!", native: "How about some fish and chips, mate?" }
        };

        const foodDescriptions = {
            "baguette": { text: "Baguette fra√Æche et croustillante", lang: "fr-FR" },
            "paella": { text: "Paella sabrosa y colorida", lang: "es-ES" },
            "pretzel": { text: "Frische, salzige Brezel", lang: "de-DE" },
            "dumpling": { text: "Êñ∞È≤úÁæéÂë≥ÁöÑÈ•∫Â≠ê", lang: "zh-CN" }
        };

        // =================================================================================
        // --- 2. AUDIO & SOUND EFFECTS ---
        // =================================================================================
        
        let audioCtx;
        function initAudio() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }

        function playTone(freq, duration, type = 'sine') {
            if (!audioCtx) return;
            const osc1 = audioCtx.createOscillator();
            const osc2 = audioCtx.createOscillator();
            const gain = audioCtx.createGain();

            osc1.frequency.value = freq;
            osc2.frequency.value = freq * 1.015;
            osc1.type = osc2.type = type;

            gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            
            osc1.connect(gain);
            osc2.connect(gain);
            gain.connect(audioCtx.destination);
            
            osc1.start();
            osc2.start();
            
            osc1.stop(audioCtx.currentTime + duration);
            osc2.stop(audioCtx.currentTime + duration);
        }
        
        // =================================================================================
        // --- 3. SPEECH SYNTHESIS & VOICES ---
        // =================================================================================

        let loadedVoices = [];
        let voiceAva, voiceAndrew, voiceJenny, voiceRyan, voiceByan, voiceNatasha;
        let voiceSeraphina, voiceFlorian, voiceSonia, voiceRemy, voiceNicolas, voiceXiaoxiao;

        function getPreferredVoice(langCode, preferredNames = []) {
            if (loadedVoices.length === 0) return null;
            for (const name of preferredNames) {
                // Loosened the matching to catch different voice names like "Microsoft Remy Online"
                const match = loadedVoices.find(v => v.lang === langCode && v.name.toLowerCase().includes(name.toLowerCase()));
                if (match) return match;
            }
            // Fallback to the first available voice for the language
            return loadedVoices.find(v => v.lang === langCode) || null;
        }

        function loadAndAssignVoices() {
            loadedVoices = speechSynthesis.getVoices();
            if (loadedVoices.length === 0) return;

            // English Voices
            voiceAva = getPreferredVoice("en-US", ["Ava"]);
            voiceAndrew = getPreferredVoice("en-US", ["Andrew"]);
            voiceJenny = getPreferredVoice("en-US", ["Jenny"]);
            voiceRyan = getPreferredVoice("en-US", ["Ryan"]);
            voiceByan = getPreferredVoice("en-US", ["Byan"]);
            voiceNatasha = getPreferredVoice("en-AU", ["Natasha"]);
            
            // Multilingual Voices
            voiceSeraphina = getPreferredVoice("de-DE", ["Seraphina"]);
            voiceFlorian = getPreferredVoice("de-DE", ["Florian"]);
            voiceSonia = getPreferredVoice("es-ES", ["Sonia"]);
            voiceRemy = getPreferredVoice("fr-FR", ["Remy"]);
            voiceNicolas = getPreferredVoice("fr-FR", ["Nicolas"]);
            voiceXiaoxiao = getPreferredVoice("zh-CN", ["Xiaoxiao"]);
        }
        
        function speakText(text, voice, onEndCallback = null) {
            if (!('speechSynthesis' in window)) return;
            if (!voice) { 
                console.warn("SpeakText called but no voice was available for the text:", text);
                return; 
            }
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.voice = voice;
            utterance.lang = voice.lang;
            utterance.rate = 0.85; 
            utterance.pitch = 1.2;
            utterance.volume = 1;
            
            if (onEndCallback) utterance.onend = onEndCallback;
            
            speechSynthesis.speak(utterance);
        }

        // =================================================================================
        // --- 4. CORE APPLICATION LOGIC (INIT, PAGE NAVIGATION) ---
        // =================================================================================
        
        function init() {
            updateProgress();
            generatePriceControls();
            updateStaff();
            loadAndAssignVoices();
            createFloatingEmojis();
            initDragAndDrop();
        }
        
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => notification.style.opacity = 1, 10); // Fade in

            setTimeout(() => {
                notification.style.opacity = 0;
                setTimeout(() => notification.style.display = 'none', 500); // Fade out
            }, 3000);
        }

        function createFloatingEmojis() {
            const container = document.getElementById('background-emojis');
            const emojis = ['ü•û', 'üçî', 'üçï', 'üçì', 'üç∞', 'üç£', 'üåÆ', 'üç©', 'üç™', 'üçâ', '‚òïÔ∏è', 'üßã'];
            for (let i = 0; i < 15; i++) {
                const emoji = document.createElement('div');
                emoji.className = 'floating-emoji';
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = `${Math.random() * 100}vw`;
                emoji.style.animationDuration = `${15 + Math.random() * 15}s`;
                emoji.style.animationDelay = `${Math.random() * 10}s`;
                container.appendChild(emoji);
            }
        }

        function updateNames() {
            restaurant.owner = document.getElementById('ownerName').value;
            restaurant.restaurantName = document.getElementById('restaurantName').value;
            if (restaurant.restaurantName) {
                document.getElementById('mainTitle').textContent = `üçΩÔ∏è ${restaurant.restaurantName} üé®`;
                document.getElementById('mainSubtitle').textContent = `${restaurant.owner}'s Amazing Restaurant!`;
            }
            updateProgress();
        }
        
        function showPage(event, pageId) {
            initAudio();
            playTone(880, 0.1, 'triangle');
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            event.currentTarget.classList.add('active');
            currentPage = pageId;

            let voice;
            let textToSpeak = '';
            
            const pageGreetings = {
                breakfast: "Time to make a yummy breakfast menu!",
                lunch: "What should we have for lunch?",
                dinner: "Let's create a delicious dinner!",
                prices: "Let's set the prices.",
                times: "When will your restaurant be open?",
                staff: "Let's hire an amazing team!",
                summary: "Wow! Look at your amazing restaurant!"
            };

            switch(pageId) {
                case 'setup':
                     voice = voiceAva || voiceJenny;
                     textToSpeak = "Let's get your restaurant set up!";
                     break;
                case 'menu':
                     voice = voiceAndrew || voiceRyan;
                     const missionElement = document.getElementById('missionText');
                     if (missionElement) {
                        const missionClone = missionElement.cloneNode(true);
                        missionClone.querySelectorAll('span').forEach(span => span.remove());
                        textToSpeak = missionClone.textContent.trim().replace(/\s\s+/g, ' ');
                    }
                    break;
                default:
                    voice = voiceJenny || voiceAva;
                    textToSpeak = pageGreetings[pageId];
                    break;
            }

            if (textToSpeak && voice) {
                speakText(textToSpeak, voice);
            }

            if (pageId === 'prices') generatePriceControls();
            if (pageId === 'summary') generateSummary();
            updateProgress();
        }

        // =================================================================================
        // --- 5. DRAG & DROP FUNCTIONALITY ---
        // =================================================================================
        
        let draggingElement = null;
        let ghostElement = null;
        let touchOffsetX = 0;
        let touchOffsetY = 0;

        function initDragAndDrop() {
            document.addEventListener('touchstart', handleTouchStart, { passive: false });
            document.addEventListener('touchmove', handleTouchMove, { passive: false });
            document.addEventListener('touchend', handleTouchEnd);
        }

        function allowDrop(ev) { ev.preventDefault(); ev.target.closest('.drop-zone').classList.add('drag-over'); }
        function dragLeave(ev) { ev.target.closest('.drop-zone').classList.remove('drag-over'); }
        function drag(ev) {
            const data = { emoji: ev.target.dataset.emoji, name: ev.target.dataset.name };
            ev.dataTransfer.setData("text/plain", JSON.stringify(data));
        }
        function drop(ev) {
            ev.preventDefault();
            const dropZone = ev.target.closest('.drop-zone');
            dropZone.classList.remove('drag-over');
            const data = JSON.parse(ev.dataTransfer.getData("text/plain"));
            handleDropLogic(dropZone, data);
        }

        function handleTouchStart(e) {
            if (e.target.classList.contains('emoji-item')) {
                e.preventDefault();
                draggingElement = e.target;
                const rect = draggingElement.getBoundingClientRect();
                touchOffsetX = e.touches[0].clientX - rect.left;
                touchOffsetY = e.touches[0].clientY - rect.top;

                ghostElement = draggingElement.cloneNode(true);
                ghostElement.style.position = 'absolute';
                ghostElement.style.zIndex = '1001';
                ghostElement.style.pointerEvents = 'none';
                ghostElement.style.opacity = '0.7';
                ghostElement.style.transform = 'scale(1.2)';
                document.body.appendChild(ghostElement);
                moveGhost(e.touches[0]);
            }
        }

        function handleTouchMove(e) {
            if (draggingElement) {
                e.preventDefault();
                moveGhost(e.touches[0]);
            }
        }

        function handleTouchEnd(e) {
            if (draggingElement) {
                ghostElement.style.display = 'none';
                const elementUnder = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
                ghostElement.style.display = 'block';
                
                const dropZone = elementUnder ? elementUnder.closest('.drop-zone') : null;
                if (dropZone) {
                    const data = { emoji: draggingElement.dataset.emoji, name: draggingElement.dataset.name };
                    handleDropLogic(dropZone, data);
                }

                document.body.removeChild(ghostElement);
                draggingElement = null;
                ghostElement = null;
                document.querySelectorAll('.drop-zone').forEach(zone => zone.classList.remove('drag-over'));
            }
        }
        
        function moveGhost(touch) {
            if (ghostElement) {
                ghostElement.style.left = `${touch.pageX - touchOffsetX}px`;
                ghostElement.style.top = `${touch.pageY - touchOffsetY}px`;
                ghostElement.style.display = 'none';
                const elementUnder = document.elementFromPoint(touch.clientX, touch.clientY);
                ghostElement.style.display = 'block';
                document.querySelectorAll('.drop-zone').forEach(zone => {
                    zone.classList.toggle('drag-over', zone === elementUnder || zone.contains(elementUnder));
                });
            }
        }
        
        function handleDropLogic(dropZone, data) {
            const droppedItem = document.createElement('div');
            droppedItem.className = 'dropped-item';
            droppedItem.innerHTML = `${data.emoji} ${data.name}`;
            droppedItem.onclick = () => removeItem(droppedItem, dropZone.id, data);
            
            dropZone.querySelector('.dropped-items').appendChild(droppedItem);
            storeMenuItem(dropZone.id, data);
            playTone(200, 0.15);

            const description = foodDescriptions[data.name];
            if (description) {
                const preferredVoices = {
                    'de-DE': ['Seraphina', 'Florian'],
                    'es-ES': ['Sonia'],
                    'fr-FR': ['Remy', 'Nicolas'],
                    'zh-CN': ['Xiaoxiao']
                };
                const voice = getPreferredVoice(description.lang, preferredVoices[description.lang]);
                speakText(description.text, voice);
            } else {
                const phrases = ["Great choice!", "Yummy!", "Looks delicious!", "Excellent!"];
                const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
                let currentVoice = voiceAva || voiceJenny; // Default voice
                if (currentPage === 'lunch') currentVoice = voiceRyan || voiceByan || currentVoice;
                if (currentPage === 'dinner') currentVoice = voiceByan || voiceAndrew || currentVoice;
                
                speakText(randomPhrase, currentVoice, () => {
                    speakText(data.name, currentVoice);
                });
            }
            updateProgress();
        }

        function removeItem(element, dropZoneId, data) {
            playTone(880, 0.1, 'triangle');
            element.remove();
            removeMenuItem(dropZoneId, data);
            updateProgress();
        }

        // =================================================================================
        // --- 6. UI & DATA UPDATE FUNCTIONS (Menus, Prices, etc.) ---
        // =================================================================================
        
        function getMenuCategory(dropZoneId) {
            if (dropZoneId.includes('breakfast')) return restaurant.breakfast;
            if (dropZoneId.includes('lunch')) return restaurant.lunch;
            if (dropZoneId.includes('dinner')) return restaurant.dinner;
        }
        function storeMenuItem(dropZoneId, data) {
            const category = getMenuCategory(dropZoneId);
            const type = dropZoneId.includes('Drinks') ? 'drinks' : 'foods';
            if (!category[type].some(item => item.name === data.name)) {
                category[type].push(data);
            }
        }
        function removeMenuItem(dropZoneId, data) {
            const category = getMenuCategory(dropZoneId);
            const type = dropZoneId.includes('Drinks') ? 'drinks' : 'foods';
            const index = category[type].findIndex(item => item.name === data.name);
            if (index > -1) category[type].splice(index, 1);
        }

        function generatePriceControls() {
            const pricesList = document.getElementById('pricesList');
            pricesList.innerHTML = '';
            const allItems = [...restaurant.breakfast.foods, ...restaurant.breakfast.drinks, ...restaurant.lunch.foods, ...restaurant.lunch.drinks, ...restaurant.dinner.foods, ...restaurant.dinner.drinks];
            const uniqueItems = [...new Map(allItems.map(item => [item.name, item])).values()];
            uniqueItems.forEach(item => {
                if (!restaurant.prices[item.name]) restaurant.prices[item.name] = 5;
                const priceControl = document.createElement('div');
                priceControl.className = 'price-controls';
                priceControl.innerHTML = `<span style="font-size: 1.5rem; color: #333;">${item.emoji} ${item.name}</span> <div class="price-dial" onclick="adjustPrice('${item.name}', -1)">-</div> <span style="font-size: 1.3rem; font-weight: bold; color: #333;" id="price-${item.name}">${restaurant.currency.symbol}${restaurant.prices[item.name]}</span> <div class="price-dial" onclick="adjustPrice('${item.name}', 1)">+</div>`;
                pricesList.appendChild(priceControl);
            });
        }

        function adjustPrice(itemName, change) {
            restaurant.prices[itemName] = Math.max(1, (restaurant.prices[itemName] || 5) + change);
            const newPrice = restaurant.prices[itemName];
            document.getElementById(`price-${itemName}`).textContent = `${restaurant.currency.symbol}${newPrice}`;
            
            playTone(523, 0.1); 
            setTimeout(() => playTone(659, 0.3), 100);
            
            speakText(`${itemName}, ${newPrice} ${restaurant.currency.name}`, voiceAva || voiceJenny);
        }
        
        function adjustTime(meal, type, change) {
            event.stopPropagation(); 
            let minutes = restaurant.times[meal][type];
            minutes = (minutes + change + 1440) % 1440;
            restaurant.times[meal][type] = minutes;
            const formattedTime = formatTime(minutes);
            document.getElementById(`${meal}-${type}`).textContent = formattedTime;
            speakText(timeToSpeakableText(formattedTime), voiceJenny || voiceAva);
        }

        function formatTime(minutes) {
            const hours24 = Math.floor(minutes / 60);
            const mins = minutes % 60;
            const ampm = hours24 >= 12 ? 'PM' : 'AM';
            let hours12 = hours24 % 12;
            hours12 = hours12 ? hours12 : 12; 
            const formattedMins = mins < 10 ? '0' + mins : mins;
            return `${hours12}:${formattedMins} ${ampm}`;
        }
        
        function timeToSpeakableText(timeString) {
            let [time] = timeString.split(' ');
            let [hour, minute] = time.split(':');
            let minuteText = parseInt(minute) === 0 ? "o'clock" : (parseInt(minute) < 10 ? `oh ${parseInt(minute)}` : minute);
            return `${hour} ${minuteText}`;
        }

        function toggleTime(element, timeSlot) {
            playTone(600, 0.1, 'square');
            element.classList.toggle('selected');
            const index = restaurant.openingHours.indexOf(timeSlot);
            if (element.classList.contains('selected')) {
                if (index === -1) restaurant.openingHours.push(timeSlot);
            } else {
                if (index > -1) restaurant.openingHours.splice(index, 1);
            }
            updateProgress();
        }

        function selectStaffCountry(element, role, lang) {
            if (chosenStaffLangs.has(lang) && restaurant.staff[role].lang !== lang) {
                showNotification("This country is already assigned to another staff member.");
                return;
            }

            if (restaurant.staff[role].lang) {
                chosenStaffLangs.delete(restaurant.staff[role].lang);
            }

            restaurant.staff[role].lang = lang;
            chosenStaffLangs.add(lang);
            
            const parentCard = element.closest('.staff-card');
            parentCard.querySelectorAll('.flag-item').forEach(item => item.classList.remove('selected'));
            element.classList.add('selected');
            
            const script = staffScripts[lang];
            
            if (script) {
                const preferredNativeVoices = {
                    'de-DE': ['Seraphina', 'Florian'],
                    'es-ES': ['Sonia'],
                    'fr-FR': ['Remy', 'Nicolas'],
                    'zh-CN': ['Xiaoxiao'],
                    'en-AU': ['Natasha']
                };
                const nativeVoice = getPreferredVoice(lang, preferredNativeVoices[lang]);
                const englishVoice = voiceRyan || voiceAndrew;

                 speakText(script.english, englishVoice, () => {
                     speakText(script.native, nativeVoice);
                 });
            }
        }

        function updateStaff() {
            document.querySelectorAll('.staff-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const role = e.target.dataset.role;
                    restaurant.staff[role].name = e.target.value;
                    updateProgress();
                });
            });
        }

        function updateProgress() {
            document.getElementById('breakfastCount').textContent = restaurant.breakfast.foods.length + restaurant.breakfast.drinks.length;
            document.getElementById('lunchCount').textContent = restaurant.lunch.foods.length + restaurant.lunch.drinks.length;
            document.getElementById('dinnerCount').textContent = restaurant.dinner.foods.length + restaurant.dinner.drinks.length;
            const hiredStaff = Object.values(restaurant.staff).filter(s => s.name.trim() !== "").length;
            document.getElementById('staffCount').textContent = `${hiredStaff}/5`;
            document.getElementById('hoursCount').textContent = `${restaurant.openingHours.length}/4`;
        }

        function generateSummary() {
            const summaryContainer = document.getElementById('restaurantSummary');
            summaryContainer.innerHTML = ''; 
            const createCard = (title, content) => `<div class="summary-card"><div class="summary-title">${title}</div><div class="menu-preview">${content}</div></div>`;
            let overviewContent = `<strong>Restaurant Name:</strong> ${restaurant.restaurantName || 'N/A'}<br><strong>Owner:</strong> ${restaurant.owner || 'N/A'}<br><strong>Currency:</strong> ${restaurant.currency.code} (${restaurant.currency.symbol})<br><strong>Opening Hours:</strong> ${restaurant.openingHours.join(', ') || 'N/A'}`;
            summaryContainer.innerHTML += createCard('üè™ Restaurant Overview', overviewContent);
            
            const createMenuContent = (menu) => {
                const allItems = [...menu.foods, ...menu.drinks];
                return allItems.length > 0 ? allItems.map(item => `<div>${item.emoji} ${item.name} - ${restaurant.currency.symbol}${restaurant.prices[item.name] || 5}</div>`).join('') : null;
            };
            
            const breakfastContent = createMenuContent(restaurant.breakfast);
            if (breakfastContent) summaryContainer.innerHTML += createCard('üåÖ Breakfast Menu', breakfastContent);
            const lunchContent = createMenuContent(restaurant.lunch);
            if (lunchContent) summaryContainer.innerHTML += createCard('‚òÄÔ∏è Lunch Menu', lunchContent);
            const dinnerContent = createMenuContent(restaurant.dinner);
            if (dinnerContent) summaryContainer.innerHTML += createCard('üåô Dinner Menu', dinnerContent);

            const staffList = Object.entries(restaurant.staff).filter(([, s]) => s.name.trim() !== "");
            if (staffList.length > 0) {
                const staffContent = staffList.map(([role, staff]) => {
                    const emojiMap = { chef: 'üë®‚Äçüç≥', cook: 'üë©‚Äçüç≥', manager: 'üë®‚Äçüíº', waiter: 'ü§µ', waitress: 'ü§µ‚Äç‚ôÄÔ∏è'};
                    return `<div>${emojiMap[role]} ${role.charAt(0).toUpperCase() + role.slice(1)}: ${staff.name}</div>`;
                }).join('');
                summaryContainer.innerHTML += createCard('üë• Our Amazing Team', staffContent);
            }
        }
        
        // =================================================================================
        // --- 7. EVENT LISTENERS ---
        // =================================================================================

        document.addEventListener('DOMContentLoaded', init);
        speechSynthesis.onvoiceschanged = loadAndAssignVoices;
    </script>
</body>
</html>
