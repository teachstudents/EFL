<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EFL Speaking Practice - Interactive</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .hide-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        @keyframes bounce-short {
            0%, 100% { transform: translateY(-50%) translateX(-50%); }
            50% { transform: translateY(-65%) translateX(-50%); }
        }
        
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-bounce-custom {
            animation: bounce-short 1s infinite;
        }
        
        .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (SVG components) ---
        
        const BookOpen = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        );
        const Home = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        );
        const Utensils = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>
        );
        const Briefcase = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
        );
        const MapPin = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
        );
        const Activity = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M12 18v-4"/><path d="M8 18v-2"/><path d="M16 18v-6"/></svg>
        );
        const Mic = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="23"/><line x1="8" x2="16" y1="23" y2="23"/></svg>
        );
        const Volume2 = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
        );
        const Settings = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        );
        const RefreshCw = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        );

        // --- HELPER COMPONENTS ---

        const EmojiItem = ({ emoji, label, x, y, size, activeItem, onClick }) => {
            const isActive = activeItem === label;
            
            // Map for increasing size (approx 35-40% boost total - 2 steps up)
            const largerSizes = {
                'xs': 'base', 'sm': 'lg', 'base': 'xl', 'lg': '2xl', 'xl': '3xl',
                '2xl': '4xl', '3xl': '5xl', '4xl': '6xl', '5xl': '7xl', '6xl': '8xl', '7xl': '9xl'
            };
            const finalSize = largerSizes[size] || size;

            return (
                <div 
                onClick={(e) => { e.stopPropagation(); onClick(label); }}
                className={`absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300 hover:scale-125 hover:z-10
                    ${isActive ? 'scale-125 z-20 drop-shadow-xl filter brightness-110' : 'opacity-95 hover:brightness-110'}
                `}
                style={{ left: x, top: y }}
                >
                <div className={`text-${finalSize} cursor-pointer select-none drop-shadow-sm`}>
                    {emoji}
                </div>
                {isActive && (
                    <div className="absolute -bottom-6 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs px-2 py-0.5 rounded-full whitespace-nowrap opacity-75 z-50 animate-bounce-custom">
                    {label}
                    </div>
                )}
                </div>
            );
        };

        // --- SCENE ILLUSTRATIONS ---

        const SchoolIllustration = ({ activeItem, onInteract }) => (
            <div className="relative w-full h-[34rem] bg-blue-50 rounded-xl border-2 border-blue-200 overflow-hidden cursor-pointer shadow-inner group">
                <div className="absolute top-0 left-0 w-full h-6 bg-blue-200 opacity-50"></div>
                <div className="absolute bottom-0 left-0 w-full h-16 bg-orange-100 border-t-2 border-orange-200"></div>

                <EmojiItem emoji="â°" label="clock" x="50%" y="10%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ“…" label="calendar" x="20%" y="12%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ–¼ï¸" label="picture" x="75%" y="12%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸªŸ" label="window" x="85%" y="25%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸšª" label="door" x="10%" y="40%" size="6xl" activeItem={activeItem} onClick={onInteract} />

                <EmojiItem emoji="ðŸ–¥ï¸" label="computer" x="30%" y="45%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ“˜" label="workbook" x="45%" y="60%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="âœï¸" label="pencil sharpener" x="60%" y="55%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ“Ž" label="paper clip" x="35%" y="65%" size="2xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ“" label="ruler" x="55%" y="65%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ–Šï¸" label="pen" x="25%" y="60%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="âœ‚ï¸" label="scissors" x="68%" y="60%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ–ï¸" label="crayon" x="50%" y="50%" size="3xl" activeItem={activeItem} onClick={onInteract} />

                <EmojiItem emoji="ðŸŽ’" label="backpack" x="20%" y="85%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ—‘ï¸" label="trash can" x="85%" y="80%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸª‘" label="chair" x="50%" y="80%" size="5xl" activeItem={activeItem} onClick={onInteract} />
            </div>
        );

        const HouseIllustration = ({ activeItem, onInteract }) => (
            <div className="relative w-full h-[34rem] bg-green-50 rounded-xl border-2 border-green-200 overflow-hidden cursor-pointer shadow-inner">
                <div className="absolute top-1/2 left-0 w-full h-2 bg-green-800 opacity-20"></div>
                <div className="absolute top-0 left-1/2 w-2 h-full bg-green-800 opacity-20"></div>

                <div className="absolute top-2 left-2 text-xs text-green-700 font-bold opacity-50">BEDROOM</div>
                <EmojiItem emoji="ðŸ›ï¸" label="bed" x="15%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ’¡" label="lamp" x="35%" y="25%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ§¸" label="toy box" x="40%" y="40%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ–¼ï¸" label="poster" x="25%" y="10%" size="2xl" activeItem={activeItem} onClick={onInteract} />

                <div className="absolute top-2 right-2 text-xs text-green-700 font-bold opacity-50">BATHROOM</div>
                <EmojiItem emoji="ðŸ›" label="bathtub" x="65%" y="20%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸš½" label="toilet" x="85%" y="25%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸš¿" label="shower" x="60%" y="10%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸªž" label="mirror" x="80%" y="10%" size="3xl" activeItem={activeItem} onClick={onInteract} />

                <div className="absolute bottom-2 left-2 text-xs text-green-700 font-bold opacity-50">LIVING ROOM</div>
                <EmojiItem emoji="ðŸ›‹ï¸" label="sofa" x="20%" y="70%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ“º" label="TV" x="40%" y="65%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸª´" label="plant" x="10%" y="85%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="â˜Žï¸" label="telephone" x="45%" y="85%" size="3xl" activeItem={activeItem} onClick={onInteract} />

                <div className="absolute bottom-2 right-2 text-xs text-green-700 font-bold opacity-50">KITCHEN</div>
                <EmojiItem emoji="ðŸ³" label="stove" x="65%" y="70%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸš°" label="sink" x="85%" y="70%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ§Š" label="fridge" x="90%" y="85%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ½ï¸" label="table" x="65%" y="85%" size="4xl" activeItem={activeItem} onClick={onInteract} />
            </div>
        );

        const FoodIllustration = ({ activeItem, onInteract }) => (
            <div className="relative w-full h-[34rem] bg-orange-50 rounded-xl border-2 border-orange-200 overflow-hidden cursor-pointer shadow-inner">
                <div className="absolute inset-0 opacity-10" style={{ backgroundImage: 'radial-gradient(#EA580C 1px, transparent 1px)', backgroundSize: '20px 20px' }}></div>
                
                <EmojiItem emoji="ðŸ³" label="omelet" x="20%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ¥ž" label="pancake" x="40%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ¥£" label="cereal" x="60%" y="20%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ¥—" label="salad" x="80%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                
                <EmojiItem emoji="ðŸ•" label="pizza" x="15%" y="50%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ”" label="hamburger" x="35%" y="50%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŸ" label="french fries" x="55%" y="50%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ¥ª" label="sandwich" x="75%" y="50%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ—" label="chicken" x="90%" y="45%" size="4xl" activeItem={activeItem} onClick={onInteract} />

                <EmojiItem emoji="ðŸ‘" label="peach" x="15%" y="80%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ" label="pear" x="30%" y="80%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŽ" label="apple" x="45%" y="80%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŒ" label="banana" x="60%" y="80%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ¦" label="yogurt" x="75%" y="75%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ¥›" label="milk" x="85%" y="80%" size="3xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸµ" label="tea" x="95%" y="80%" size="3xl" activeItem={activeItem} onClick={onInteract} />
            </div>
        );

        const OccupationsIllustration = ({ activeItem, onInteract }) => (
            <div className="relative w-full h-[34rem] bg-purple-50 rounded-xl border-2 border-purple-200 overflow-hidden cursor-pointer shadow-inner">
                <div className="absolute bottom-0 w-full h-1/4 bg-gray-300 opacity-50"></div>
                
                <EmojiItem emoji="ðŸ‘¨â€ðŸ³" label="cook" x="15%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ‘©â€âš•ï¸" label="nurse" x="35%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸª" label="shopkeeper" x="55%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ‘¨â€âš•ï¸" label="doctor" x="75%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />

                <EmojiItem emoji="ðŸš•" label="taxi driver" x="20%" y="50%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ§‘â€ðŸŒ¾" label="farmer" x="45%" y="50%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ‘©â€ðŸ«" label="teacher" x="65%" y="50%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="âœˆï¸" label="pilot" x="85%" y="40%" size="5xl" activeItem={activeItem} onClick={onInteract} />

                <EmojiItem emoji="ðŸ‘®" label="police officer" x="15%" y="80%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ‘¨â€ðŸš’" label="firefighter" x="35%" y="80%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŽ¨" label="artist" x="55%" y="80%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="âš½" label="soccer player" x="80%" y="80%" size="5xl" activeItem={activeItem} onClick={onInteract} />
            </div>
        );

        // --- NEW TOPICS: TOWN & ACTIVITIES ---

        const TownIllustration = ({ activeItem, onInteract }) => (
            <div className="relative w-full h-[34rem] bg-gray-200 rounded-xl border-2 border-gray-300 overflow-hidden cursor-pointer shadow-inner">
                {/* Roads */}
                <div className="absolute top-1/2 left-0 w-full h-16 bg-gray-600 transform -translate-y-1/2 border-t-2 border-b-2 border-yellow-400 border-dashed"></div>
                <div className="absolute top-0 left-1/2 w-16 h-full bg-gray-600 transform -translate-x-1/2 border-l-2 border-r-2 border-yellow-400 border-dashed"></div>

                {/* Top Left Block */}
                <EmojiItem emoji="ðŸ¥" label="hospital" x="20%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸš“" label="police station" x="10%" y="35%" size="4xl" activeItem={activeItem} onClick={onInteract} />

                {/* Top Right Block */}
                <EmojiItem emoji="ðŸ«" label="school" x="80%" y="20%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ“š" label="library" x="65%" y="30%" size="4xl" activeItem={activeItem} onClick={onInteract} />

                {/* Bottom Left Block */}
                <EmojiItem emoji="ðŸŒ³" label="park" x="20%" y="80%" size="6xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŠ" label="pool" x="35%" y="70%" size="4xl" activeItem={activeItem} onClick={onInteract} />

                {/* Bottom Right Block */}
                <EmojiItem emoji="ðŸª" label="store" x="80%" y="80%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ¥–" label="bakery" x="65%" y="70%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŽ¬" label="movie theater" x="90%" y="65%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                
                {/* Vehicles on Road */}
                <EmojiItem emoji="ðŸšŒ" label="bus" x="50%" y="60%" size="3xl" activeItem={activeItem} onClick={onInteract} />
            </div>
        );

        const ActivityIllustration = ({ activeItem, onInteract }) => (
            <div className="relative w-full h-[34rem] bg-green-100 rounded-xl border-2 border-green-300 overflow-hidden cursor-pointer shadow-inner">
                {/* Grass texture hint */}
                <div className="absolute inset-0 opacity-20" style={{ backgroundImage: 'radial-gradient(#166534 1px, transparent 1px)', backgroundSize: '30px 30px' }}></div>
                
                {/* Sky */}
                <div className="absolute top-0 w-full h-24 bg-blue-200 opacity-50"></div>
                
                {/* Actions */}
                <EmojiItem emoji="ðŸƒ" label="running" x="15%" y="60%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŠ" label="swimming" x="35%" y="65%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸš´" label="riding a bike" x="55%" y="60%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="âš½" label="playing soccer" x="80%" y="70%" size="5xl" activeItem={activeItem} onClick={onInteract} />
                
                <EmojiItem emoji="ðŸ“–" label="reading" x="20%" y="30%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŽ¨" label="drawing" x="40%" y="30%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸ˜´" label="sleeping" x="60%" y="30%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                <EmojiItem emoji="ðŸŽ¤" label="singing" x="80%" y="30%" size="4xl" activeItem={activeItem} onClick={onInteract} />
                
                <EmojiItem emoji="ðŸ’ƒ" label="dancing" x="50%" y="85%" size="4xl" activeItem={activeItem} onClick={onInteract} />
            </div>
        );

        // --- DATA ---

        const units = [
            {
                id: 1,
                title: "At School",
                color: "blue",
                icon: <BookOpen className="w-5 h-5" />,
                illustration: SchoolIllustration,
                vocabulary: ["pencil sharpener", "clock", "workbook", "paper clip", "door", "window", "calendar", "computer", "ruler", "pen", "scissors", "backpack", "trash can", "picture"],
                getPatterns: (word) => {
                    const noun = word || "[object]";
                    const article = ["a","e","i","o","u"].includes(noun[0]) ? "an" : "a";
                    return [
                        { q: "What's this?", a: `It's ${article} ${noun}.` },
                        { q: `Is this ${article} ${noun}?`, a: "Yes, it is." },
                        { q: "What are these?", a: `They are ${noun}s.` },
                        { q: `Whose ${noun} is this?`, a: `It's Scott's ${noun}.` }
                    ];
                }
            },
            {
                id: 3,
                title: "My House",
                color: "green",
                icon: <Home className="w-5 h-5" />,
                illustration: HouseIllustration,
                vocabulary: ["bed", "bathtub", "sofa", "stove", "lamp", "sink", "toilet", "TV", "mirror", "shower", "plant", "toy box", "poster", "table", "fridge", "telephone"],
                getPatterns: (word) => {
                    const noun = word || "[object]";
                    const article = ["a","e","i","o","u"].includes(noun[0]) ? "an" : "a";
                    const roomMap = {
                        "bed": "bedroom", "lamp": "bedroom", "toy box": "bedroom", "poster": "bedroom",
                        "bathtub": "bathroom", "toilet": "bathroom", "shower": "bathroom", "mirror": "bathroom",
                        "sofa": "living room", "TV": "living room", "plant": "living room", "telephone": "living room",
                        "stove": "kitchen", "fridge": "kitchen", "table": "kitchen", "sink": "kitchen"
                    };
                    const room = roomMap[noun] || "house";
                    return [
                        { q: `Where's the ${noun}?`, a: `It's in the ${room}.` },
                        { q: `Is there ${article} ${noun}?`, a: "Yes, there is." },
                        { q: `Are there ${noun}s in the ${room}?`, a: "Yes, there are." },
                        { q: "What do you see?", a: `I see ${article} ${noun}.` }
                    ];
                }
            },
            {
                id: 4,
                title: "Things to Eat",
                color: "orange",
                icon: <Utensils className="w-5 h-5" />,
                illustration: FoodIllustration,
                vocabulary: ["omelet", "peach", "pear", "pancake", "yogurt", "cereal", "tea", "pizza", "hamburger", "french fries", "salad", "sandwich", "chicken", "apple", "banana", "milk"],
                getPatterns: (word) => {
                    const noun = word || "[food]";
                    return [
                        { q: "What does he want?", a: `He wants ${noun}.` },
                        { q: `Do you like ${noun}?`, a: "Yes, I do." },
                        { q: `Does she want ${noun}?`, a: "No, she doesn't." },
                        { q: "What's for lunch?", a: `${noun} and milk.` }
                    ];
                }
            },
            {
                id: 5,
                title: "Occupations",
                color: "purple",
                icon: <Briefcase className="w-5 h-5" />,
                illustration: OccupationsIllustration,
                vocabulary: ["shopkeeper", "cook", "nurse", "farmer", "taxi driver", "teacher", "doctor", "pilot", "police officer", "firefighter", "artist", "soccer player"],
                getPatterns: (word) => {
                    const noun = word || "[job]";
                    const article = ["a","e","i","o","u"].includes(noun[0]) ? "an" : "a";
                    return [
                        { q: "Who's she?", a: `She's ${article} ${noun}.` },
                        { q: `Is he ${article} ${noun}?`, a: "No, he isn't." },
                        { q: `Are they ${noun}s?`, a: "Yes, they are." },
                        { q: "Who are they?", a: `They are ${noun}s.` }
                    ];
                }
            },
            {
                id: 6,
                title: "In Town",
                color: "gray",
                icon: <MapPin className="w-5 h-5" />,
                illustration: TownIllustration,
                vocabulary: ["hospital", "park", "school", "library", "store", "police station", "pool", "bakery", "movie theater", "bus"],
                getPatterns: (word) => {
                    const place = word || "[place]";
                    return [
                        { q: "Where are you going?", a: `I'm going to the ${place}.` },
                        { q: `Is there a ${place} here?`, a: "Yes, there is." },
                        { q: `Where's the ${place}?`, a: "It's over there." },
                        { q: "What's that?", a: `It's the ${place}.` }
                    ];
                }
            },
            {
                id: 7,
                title: "Activities",
                color: "red",
                icon: <Activity className="w-5 h-5" />,
                illustration: ActivityIllustration,
                vocabulary: ["running", "swimming", "dancing", "singing", "reading", "sleeping", "drawing", "playing soccer", "riding a bike"],
                getPatterns: (word) => {
                    // Because vocabulary is already in gerund form (e.g. "running"), we use it directly
                    const action = word || "[action]";
                    return [
                        { q: "What are you doing?", a: `I am ${action}.` },
                        { q: `Is he ${action}?`, a: "Yes, he is." },
                        { q: `Can you see him ${action}?`, a: "Yes, I can." },
                        { q: "What is she doing?", a: `She is ${action}.` }
                    ];
                }
            }
        ];

        // --- APP COMPONENT ---

        function App() {
            const [currentUnitId, setCurrentUnitId] = useState(1);
            const [activeItem, setActiveItem] = useState(null);
            const [availableVoices, setAvailableVoices] = useState([]);
            const [selectedVoice, setSelectedVoice] = useState(null);
            
            const currentUnit = units.find(u => u.id === currentUnitId);

            useEffect(() => {
                const loadVoices = () => {
                    const voices = window.speechSynthesis.getVoices();
                    if (voices.length > 0) {
                        setAvailableVoices(voices);
                        const preferred = [
                            "Microsoft Emma Online (Natural)", 
                            "Microsoft Ava Online (Natural)", 
                            "Microsoft Brian Online (Natural)", 
                            "Microsoft Andrew Online (Natural)",
                            "Google US English"
                        ];
                        let bestVoice = null;
                        for (let p of preferred) {
                            const found = voices.find(v => v.name.includes(p));
                            if (found) { bestVoice = found; break; }
                        }
                        if (!bestVoice) bestVoice = voices.find(v => v.lang.startsWith('en'));
                        setSelectedVoice(bestVoice);
                    }
                };

                loadVoices();
                if (window.speechSynthesis.onvoiceschanged !== undefined) {
                    window.speechSynthesis.onvoiceschanged = loadVoices;
                }
            }, []);

            const cycleVoice = () => {
                if (availableVoices.length === 0) return;
                const currentIndex = availableVoices.indexOf(selectedVoice);
                const nextIndex = (currentIndex + 1) % availableVoices.length;
                setSelectedVoice(availableVoices[nextIndex]);
            };

            const speak = (text) => {
                if (!window.speechSynthesis) return;
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                if (selectedVoice) utterance.voice = selectedVoice;
                utterance.rate = 0.85; 
                utterance.pitch = 1.1; 
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);
            };

            const handleObjectClick = (word) => {
                setActiveItem(word);
                speak(word);
            };

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-800 pb-10">
                    <header className="bg-white shadow-sm sticky top-0 z-10 border-b border-gray-100">
                        <div className="max-w-7xl mx-auto px-2 py-2 flex items-center justify-between gap-2 overflow-x-hidden">
                            <div className="flex overflow-x-auto gap-2 py-1 hide-scrollbar flex-1">
                                {units.map((unit) => (
                                    <button
                                        key={unit.id}
                                        onClick={() => { setCurrentUnitId(unit.id); setActiveItem(null); }}
                                        className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full whitespace-nowrap transition-all text-sm ${
                                            currentUnitId === unit.id 
                                            ? `bg-${unit.color}-100 text-${unit.color}-700 ring-2 ring-${unit.color}-400 font-bold shadow-sm` 
                                            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                        }`}
                                    >
                                        {unit.icon}
                                        {unit.title}
                                    </button>
                                ))}
                            </div>
                            <button 
                                onClick={cycleVoice}
                                className="flex-shrink-0 text-xs bg-gray-50 hover:bg-gray-100 border border-gray-200 px-3 py-2 rounded-lg flex items-center gap-2 transition-colors"
                                title={selectedVoice ? selectedVoice.name : "Loading voices..."}
                            >
                                <Settings className="w-3 h-3 text-gray-400" />
                                <span className="font-medium hidden sm:inline text-gray-600">
                                    {selectedVoice ? selectedVoice.name.split(' ')[1] || "Voice" : "..."}
                                </span>
                            </button>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto px-4 py-6 space-y-8">
                        <section className="grid md:grid-cols-2 gap-6">
                            <div className="space-y-4">
                                <div className="bg-white p-4 rounded-2xl shadow-sm border border-gray-100">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className={`text-xl font-bold text-${currentUnit.color}-600 flex items-center gap-2`}>
                                            <Mic className="w-5 h-5" />
                                            {currentUnit.title}
                                        </h2>
                                        <span className="text-xs bg-gray-100 px-2 py-1 rounded text-gray-500 font-medium">
                                            Click items below
                                        </span>
                                    </div>
                                    
                                    <currentUnit.illustration 
                                        activeItem={activeItem} 
                                        onInteract={handleObjectClick} 
                                    />
                                    
                                    <div className="mt-4 h-10 flex justify-center items-center">
                                        {activeItem ? (
                                            <div className={`px-4 py-2 bg-${currentUnit.color}-50 rounded-lg border border-${currentUnit.color}-200 animate-fade-in`}>
                                                <span className={`text-xl font-bold text-${currentUnit.color}-700`}>
                                                    {activeItem.toUpperCase()}
                                                </span>
                                            </div>
                                        ) : (
                                            <span className="text-gray-400 italic text-sm">
                                                Select an emoji to practice...
                                            </span>
                                        )}
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-6">
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 h-full flex flex-col">
                                    <h3 className="font-bold text-gray-700 mb-4 flex items-center justify-between">
                                        <div className="flex items-center gap-2">
                                            <RefreshCw className="w-4 h-4 text-blue-500" />
                                            Practice Patterns
                                        </div>
                                    </h3>

                                    <div className="space-y-3 flex-1">
                                        {currentUnit.getPatterns(activeItem).map((pat, idx) => (
                                            <div 
                                                key={idx} 
                                                className="p-3 rounded-xl bg-gray-50 hover:bg-blue-50 transition-colors border border-gray-100 group"
                                            >
                                                <div className="mb-2 pl-3 border-l-4 border-gray-300 group-hover:border-blue-400 transition-colors">
                                                    <p className="font-semibold text-gray-800 text-sm">{pat.q}</p>
                                                    <p className="text-gray-600 text-sm">{pat.a}</p>
                                                </div>

                                                <div className="flex gap-2 mt-2 opacity-90 group-hover:opacity-100 transition-opacity">
                                                    <button 
                                                        onClick={() => speak(pat.q)}
                                                        className="flex-1 text-[10px] uppercase tracking-wide font-bold bg-white border border-gray-200 hover:bg-gray-100 text-gray-500 py-1.5 rounded"
                                                    >
                                                        Question
                                                    </button>
                                                    <button 
                                                        onClick={() => speak(pat.a)}
                                                        className="flex-1 text-[10px] uppercase tracking-wide font-bold bg-white border border-gray-200 hover:bg-gray-100 text-gray-500 py-1.5 rounded"
                                                    >
                                                        Answer
                                                    </button>
                                                    <button 
                                                        onClick={() => speak(`${pat.q}... ${pat.a}`)}
                                                        className="flex-1 text-[10px] uppercase tracking-wide font-bold bg-blue-100 hover:bg-blue-200 text-blue-700 py-1.5 rounded"
                                                    >
                                                        Dialog
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                    
                                    {!activeItem && (
                                        <div className="text-center mt-4 text-xs text-orange-500 font-medium bg-orange-50 py-2 rounded">
                                            âš  Click an emoji in the picture to update sentences
                                        </div>
                                    )}
                                </div>
                            </div>
                        </section>

                        <section className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                            <h3 className="font-bold text-gray-700 mb-3 text-xs uppercase tracking-wider flex items-center gap-2">
                                <BookOpen className="w-4 h-4" />
                                Word Bank
                            </h3>
                            <div className="flex flex-wrap gap-2">
                                {currentUnit.vocabulary.map((word) => (
                                    <button
                                        key={word}
                                        onClick={() => handleObjectClick(word)}
                                        className={`px-3 py-1.5 rounded-lg text-xs transition-colors border ${
                                            activeItem === word
                                            ? `bg-${currentUnit.color}-100 border-${currentUnit.color}-300 text-${currentUnit.color}-700 font-bold scale-105 shadow-sm`
                                            : 'bg-gray-50 border-gray-100 hover:bg-gray-100 text-gray-600'
                                        }`}
                                    >
                                        {word}
                                    </button>
                                ))}
                            </div>
                        </section>
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
