<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leo & Elsa's Daily Schedule Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #FFE5B4 0%, #FFCCCB 50%, #E6E6FA 100%);
            min-height: 100vh;
            overflow-x: hidden;
            animation: backgroundShift 20s ease-in-out infinite;
            position: relative;
        }

        @keyframes backgroundShift {
            0% { background: linear-gradient(135deg, #FFE5B4 0%, #FFCCCB 50%, #E6E6FA 100%); }
            25% { background: linear-gradient(135deg, #E6E6FA 0%, #FFE5B4 50%, #FFCCCB 100%); }
            50% { background: linear-gradient(135deg, #FFCCCB 0%, #E6E6FA 50%, #FFE5B4 100%); }
            75% { background: linear-gradient(135deg, #FFE5B4 0%, #E6E6FA 50%, #FFCCCB 100%); }
            100% { background: linear-gradient(135deg, #FFE5B4 0%, #FFCCCB 50%, #E6E6FA 100%); }
        }

        .falling-emojis {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .falling-emoji {
            position: absolute;
            font-size: 2em;
            animation: fall linear infinite;
            opacity: 0.7;
        }

        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .container {
            max-width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .page {
            display: none;
            height: 100vh;
            padding: 70px 15px 15px 15px;
            animation: slideIn 0.5s ease-in-out;
            overflow-y: auto;
        }

        .page.active {
            display: flex;
            flex-direction: column;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 10px 20px;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            height: 60px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 20px;
            margin-top: 20px;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .page-title {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .characters {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .character {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            text-align: center;
            min-width: 150px;
            transition: transform 0.3s ease;
        }

        .character:hover {
            transform: translateY(-5px);
            animation: bounce 0.6s ease;
        }

        .character-avatar {
            font-size: 4em;
            margin-bottom: 10px;
        }

        .character-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255,255,255,0.9);
            padding: 10px 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 150px;
            height: 20px;
            background: #E0E0E0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '‚ú®';
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            animation: sparkle 1s infinite;
        }

        .trophies {
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .trophy {
            font-size: 1.5em;
            opacity: 0.3;
            transition: all 0.3s ease;
        }

        .trophy.earned {
            opacity: 1;
            animation: bounce 0.5s ease;
        }

        .word-bank {
            background: #F0F8FF;
            border: 3px dashed #4ECDC4;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            min-height: 120px;
        }

        .word-bank-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .word-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .word-item {
            background: linear-gradient(45deg, #FFE5B4, #FFCCCB);
            padding: 12px 20px;
            border-radius: 25px;
            cursor: grab;
            user-select: none;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .word-item:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }

        .word-item:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .word-item.dragging {
            opacity: 0.7;
            transform: rotate(5deg);
        }

        .schedule-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .time-slot {
            background: white;
            border: 3px dashed #DDD;
            border-radius: 15px;
            padding: 20px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .time-slot.drag-over {
            border-color: #4ECDC4;
            background: #F0F8FF;
            transform: scale(1.02);
        }

        .time-slot.filled {
            background: linear-gradient(45deg, #98FB98, #87CEEB);
            border-color: #4ECDC4;
        }

        .time-label {
            font-size: 1.2em;
            font-weight: bold;
            color: #666;
            margin-bottom: 10px;
        }

        .activity-display {
            font-size: 1.1em;
            color: #333;
            text-align: center;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .clickable-tts {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clickable-tts:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }
        
        .speaking {
            outline: 4px solid #4ECDC4;
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.7);
            animation: pulse 1s infinite;
        }

        .dialogue-section {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .dialogue-header {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        .question-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
        }

        .character-dialogue {
            flex: 1;
            background: #F8F9FA;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #4ECDC4;
        }

        .dialogue-question {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #333;
        }

        .dialogue-answer {
            background: #E8F5E9;
            padding: 10px;
            border-radius: 10px;
            color: #2E7D32;
        }

        .think-pair-share {
            background: linear-gradient(45deg, #FFF3E0, #E8F5E9);
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            text-align: left;
        }

        .tps-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .tps-phases {
            display: flex;
            justify-content: space-around;
            gap: 10px;
        }

        .tps-phase {
            background: white;
            padding: 12px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 120px;
            text-align: center;
        }

        .content-row {
            display: flex;
            gap: 15px;
            margin: 10px 0;
            align-items: flex-start;
        }

        .content-row .think-pair-share {
            flex: 1;
            margin: 0;
        }

        .content-row .story-section {
            flex: 1;
            margin: 0;
        }

        .phase-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .phase-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .phase-timer {
            font-size: 1.5em;
            font-weight: bold;
            color: #FF6B6B;
            margin: 10px 0;
        }

        .timer-button {
            background: #4ECDC4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .timer-button:hover {
            background: #45B7B8;
            transform: scale(1.05);
        }

        .timer-button.active {
            background: #FF6B6B;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .story-section {
            background: linear-gradient(135deg, #FFF8DC, #F0E68C);
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #DAA520;
        }

        .story-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #8B4513;
            text-align: left;
            margin-bottom: 10px;
        }

        .story-content {
            font-size: 1em;
            line-height: 1.4;
            color: #654321;
            text-align: left;
        }

        .nav-button {
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            color: #333;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 
                8px 8px 16px rgba(0,0,0,0.2),
                -8px -8px 16px rgba(255,255,255,0.8),
                inset 0 0 0 rgba(255,255,255,0);
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            background: linear-gradient(145deg, #f0f0f0, #d0d0d0);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 
                12px 12px 24px rgba(0,0,0,0.3),
                -12px -12px 24px rgba(255,255,255,0.9),
                inset 2px 2px 4px rgba(255,255,255,0.5);
        }

        .nav-button:active {
            transform: translateY(1px) scale(0.98);
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.3),
                -4px -4px 8px rgba(255,255,255,0.7),
                inset 4px 4px 8px rgba(0,0,0,0.1);
        }

        .nav-button:disabled {
            background: rgba(200,200,200,0.5);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .learning-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .learning-cards.compact {
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .learning-cards.compact .learning-card {
            padding: 15px 10px;
        }

        .learning-cards.compact .card-emoji {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .learning-cards.compact .card-word {
            font-size: 1em;
        }

        .learning-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .learning-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .learning-card.flashing {
            animation: flash 0.5s ease-in-out;
        }

        .learning-card.active-learning {
            border: 4px solid #FF6B6B;
            background: linear-gradient(45deg, #FFE5B4, #FFCCCB);
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
        }

        @keyframes flash {
            0%, 100% { background: white; }
            50% { background: #FFE5B4; }
        }

        .learning-progress {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
        }

        .progress-text {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .detailed-dialogue {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .dialogue-pair {
            background: #F8F9FA;
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #4ECDC4;
        }

        .character-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .character-avatar {
            font-size: 2em;
        }

        .dialogue-question, .dialogue-answer {
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dialogue-question {
            background: #E3F2FD;
            border-left: 4px solid #2196F3;
        }

        .dialogue-answer {
            background: #E8F5E9;
            border-left: 4px solid #4CAF50;
            margin-left: 20px;
        }

        .dialogue-question:hover, .dialogue-answer:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .card-emoji {
            font-size: 3em;
            margin-bottom: 10px;
            animation: float 3s ease-in-out infinite;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }

        .animated-emoji {
            animation: wiggle 2s ease-in-out infinite;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(5deg) scale(1.1); }
            75% { transform: rotate(-5deg) scale(0.9); }
        }

        .card-word {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .sound-effects {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 9999;
        }

        .sound-effect {
            position: absolute;
            font-size: 2em;
            animation: soundEffect 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes soundEffect {
            0% { opacity: 1; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0; transform: scale(1) translateY(-50px); }
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }

        .menu-category {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .category-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #4ECDC4;
        }

        .menu-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .menu-item {
            background: linear-gradient(45deg, #FFE5B4, #FFCCCB);
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: bold;
        }

        .menu-item:hover {
            transform: scale(1.05);
            border-color: #4ECDC4;
        }

        .menu-item.selected {
            background: linear-gradient(45deg, #98FB98, #87CEEB);
            border-color: #4ECDC4;
        }

        .selected-items {
            background: #F0F8FF;
            border: 3px dashed #4ECDC4;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            min-height: 100px;
        }

        .hobby-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .hobby-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .hobby-item:hover {
            transform: translateY(-5px);
            border-color: #4ECDC4;
        }

        .hobby-item.selected {
            background: linear-gradient(45deg, #98FB98, #87CEEB);
            border-color: #4ECDC4;
        }

        .hobby-emoji {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .hobby-name {
            font-weight: bold;
            color: #333;
        }

        .completion-celebration {
            text-align: center;
            padding: 20px;
        }

        .celebration-header {
            margin-bottom: 30px;
        }

        .celebration-title {
            font-size: 2em;
            color: #FF6B6B;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .achievement-card {
            background: linear-gradient(135deg, #FFE5B4, #FFCCCB);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            border: 3px solid #4ECDC4;
        }

        .achievement-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
        }

        .achievement-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .achievement-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .achievement-desc {
            color: #666;
            font-size: 0.9em;
        }

        .learning-stats {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .stats-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #FF6B6B;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .final-message {
            background: linear-gradient(135deg, #E8F5E9, #F3E5F5);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            border: 3px solid #4ECDC4;
        }

        .message-content {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .message-content:hover {
            transform: scale(1.02);
        }

        .message-content h3 {
            color: #FF6B6B;
            margin-bottom: 15px;
        }

        .message-content p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #333;
        }

        .restart-section {
            margin: 30px 0;
        }

        .restart-section h3 {
            color: #333;
            margin-bottom: 20px;
        }

        .restart-button, .review-button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .restart-button:hover, .review-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .review-button {
            background: linear-gradient(45deg, #4ECDC4, #45B7B8);
        }

        .final-dialogue {
            margin-top: 30px;
        }
        
        .verb-test-container { display: grid; grid-template-columns: 1fr; gap: 20px; margin-bottom: 20px; }
        @media (min-width: 768px) { .verb-test-container { grid-template-columns: 1fr 1fr; } }
        .verb-section { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .verb-section h3 { color: #FF6B6B; margin-bottom: 15px; }
        .verb-questions { list-style: none; padding: 0; }
        .verb-questions li { margin-bottom: 15px; font-size: 1.1em; }
        .verb-questions input {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 5px 10px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            font-size: 1em;
            width: 120px;
            transition: all 0.3s ease;
        }
        .verb-questions input:focus { outline: none; border-color: #4ECDC4; }
        .verb-questions input.correct { border-color: #4CAF50; background-color: #E8F5E9; }
        .verb-questions input.incorrect { border-color: #F44336; background-color: #FFEBEE; }
        .verb-test-controls { text-align: center; margin-top: 20px; }
        .verb-test-results { font-size: 1.5em; font-weight: bold; margin-top: 20px; color: #333; }

        @media (max-width: 768px) {
            .page {
                padding: 70px 10px 10px 10px;
            }
            
            .page-title {
                font-size: 2em;
            }
            
            .characters {
                flex-direction: column;
                align-items: center;
            }
            
            .schedule-container {
                grid-template-columns: 1fr;
            }
            
            .tps-phases {
                flex-direction: column;
            }
            
            .question-container {
                flex-direction: column;
            }

            .achievement-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .celebration-title {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Falling Emojis Background -->
        <div class="falling-emojis" id="fallingEmojis"></div>
        
        <!-- Main Header -->
        <div class="main-header">
            <div class="nav-controls">
                <button class="nav-button" id="prevBtn" onclick="changePage(-1)">‚Üê Previous</button>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="trophies" id="trophies">
                    <span class="trophy">üèÜ</span>
                    <span class="trophy">ü•á</span>
                    <span class="trophy">‚≠ê</span>
                    <span class="trophy">üéØ</span>
                    <span class="trophy">üåü</span>
                    <span class="trophy">üíé</span>
                    <span class="trophy">üëë</span>
                </div>
            </div>
            <div class="nav-controls">
                <button class="nav-button" id="nextBtn" onclick="changePage(1)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Sound Effects Container -->
        <div class="sound-effects" id="soundEffects"></div>

        <!-- Learning Mode 0: Welcome Vocabulary -->
        <div class="page active" id="learning-0">
            <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Welcome Vocabulary</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            
            <div class="learning-cards" id="learningCards0">
                <div class="learning-card" data-word="Schedule" data-voice="Kore">
                    <div class="card-emoji">üìÖ</div>
                    <div class="card-word">Schedule</div>
                </div>
                <div class="learning-card" data-word="Time" data-voice="Leda">
                    <div class="card-emoji">‚è∞</div>
                    <div class="card-word">Time</div>
                </div>
                <div class="learning-card" data-word="Activities" data-voice="Orus">
                    <div class="card-emoji">üéØ</div>
                    <div class="card-word">Activities</div>
                </div>
                <div class="learning-card" data-word="Fun" data-voice="Fenrir">
                    <div class="card-emoji">üéâ</div>
                    <div class="card-word">Fun</div>
                </div>
                <div class="learning-card" data-word="Adventure" data-voice="Charon">
                    <div class="card-emoji">üó∫Ô∏è</div>
                    <div class="card-word">Adventure</div>
                </div>
                <div class="learning-card" data-word="Learning" data-voice="Kore">
                    <div class="card-emoji">üìñ</div>
                    <div class="card-word">Learning</div>
                </div>
            </div>
            
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress0">0/6</span></div>
                <button class="nav-button" onclick="skipToPage(0)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(0)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 0: Welcome -->
        <div class="page" id="page-0">
            <div class="page-header">
                <h1 class="page-title">üåü Welcome to Leo & Elsa's Adventure! üåü</h1>
                <p>Let's learn about daily schedules together!</p>
            </div>

            <div class="characters">
                <div class="character clickable-tts" onclick="handleTTSClick(this, 'Hello! I am Leo!', 'Fenrir')">
                    <div class="character-avatar">üë¶</div>
                    <div class="character-name">Leo</div>
                </div>
                <div class="character clickable-tts" onclick="handleTTSClick(this, 'Hi there! I am Elsa!', 'Leda')">
                    <div class="character-avatar">üëß</div>
                    <div class="character-name">Elsa</div>
                </div>
            </div>

            <div class="learning-cards" id="welcomeCards">
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Schedule', 'Kore')">
                    <div class="card-emoji">üìÖ</div>
                    <div class="card-word">Schedule</div>
                </div>
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Time', 'Kore')">
                    <div class="card-emoji">‚è∞</div>
                    <div class="card-word">Time</div>
                </div>
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Activities', 'Kore')">
                    <div class="card-emoji">üéØ</div>
                    <div class="card-word">Activities</div>
                </div>
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Fun', 'Kore')">
                    <div class="card-emoji">üéâ</div>
                    <div class="card-word">Fun</div>
                </div>
            </div>

            <div class="story-section">
                <div class="story-title">üìñ Our Learning Journey</div>
                <div class="story-content clickable-tts" onclick="handleTTSClick(this, this.textContent, 'Kore')">
                    Leo and Elsa are excited to learn about daily schedules! They will create their own schedule, choose meals, and share their favorite activities. Join them on this fun learning adventure where every choice matters and every moment is special!
                </div>
            </div>
        </div>
        
        <!-- Learning Mode 1: Schedule Words -->
        <div class="page" id="learning-1">
             <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Schedule Words</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            <div class="learning-cards" id="learningCards1">
                 <div class="learning-card" data-word="wake up" data-voice="Kore"><div class="card-emoji">üõèÔ∏è</div><div class="card-word">wake up</div></div>
                 <div class="learning-card" data-word="brush teeth" data-voice="Leda"><div class="card-emoji">ü¶∑</div><div class="card-word">brush teeth</div></div>
                 <div class="learning-card" data-word="eat breakfast" data-voice="Orus"><div class="card-emoji">üç≥</div><div class="card-word">eat breakfast</div></div>
                 <div class="learning-card" data-word="go to school" data-voice="Fenrir"><div class="card-emoji">üè´</div><div class="card-word">go to school</div></div>
                 <div class="learning-card" data-word="have lunch" data-voice="Charon"><div class="card-emoji">üç±</div><div class="card-word">have lunch</div></div>
                 <div class="learning-card" data-word="do homework" data-voice="Kore"><div class="card-emoji">üìö</div><div class="card-word">do homework</div></div>
                 <div class="learning-card" data-word="play games" data-voice="Leda"><div class="card-emoji">üéÆ</div><div class="card-word">play games</div></div>
                 <div class="learning-card" data-word="eat dinner" data-voice="Orus"><div class="card-emoji">üçΩÔ∏è</div><div class="card-word">eat dinner</div></div>
                 <div class="learning-card" data-word="watch TV" data-voice="Fenrir"><div class="card-emoji">üì∫</div><div class="card-word">watch TV</div></div>
                 <div class="learning-card" data-word="go to bed" data-voice="Charon"><div class="card-emoji">üò¥</div><div class="card-word">go to bed</div></div>
            </div>
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress1">0/10</span></div>
                <button class="nav-button" onclick="skipToPage(1)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(1)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 1: Daily Schedule -->
        <div class="page" id="page-1">
            <div class="page-header">
                <h1 class="page-title">üìÖ Create Your Daily Schedule</h1>
                <p>Drag activities to the right time slots!</p>
            </div>

            <div class="content-row">
                <div class="think-pair-share">
                    <div class="tps-title">ü§î Think-Pair-Share: My Daily Schedule</div>
                    <div class="tps-phases">
                        <div class="tps-phase">
                            <div class="phase-icon animated-emoji">ü§î</div>
                            <div class="phase-title">Think</div>
                            <div class="phase-timer" id="thinkTimer1">1:00</div>
                            <button class="timer-button" onclick="startTimer('think', 1, 'thinkTimer1')">Start</button>
                        </div>
                        <div class="tps-phase">
                            <div class="phase-icon animated-emoji">üë•</div>
                            <div class="phase-title">Pair</div>
                            <div class="phase-timer" id="pairTimer1">2:00</div>
                            <button class="timer-button" onclick="startTimer('pair', 2, 'pairTimer1')">Start</button>
                        </div>
                        <div class="tps-phase">
                            <div class="phase-icon animated-emoji">üó£Ô∏è</div>
                            <div class="phase-title">Share</div>
                            <div class="phase-timer" id="shareTimer1">3:00</div>
                            <button class="timer-button" onclick="startTimer('share', 3, 'shareTimer1')">Start</button>
                        </div>
                    </div>
                </div>

                <div class="story-section">
                    <div class="story-title">üìñ Leo and Elsa's Perfect Day</div>
                    <div class="story-content clickable-tts" onclick="handleTTSClick(this, 'Leo and Elsa created their perfect daily schedule! Leo wakes up early at seven AM and brushes his teeth right away. Elsa loves to eat a healthy breakfast at eight AM before going to school. At twelve PM, they both enjoy lunch with their friends. After school at three PM, they do their homework together. In the evening at six PM, the family has dinner together. Finally, at nine PM, they watch their favorite TV show before going to bed. What a wonderful day!', 'Kore')">
                        Leo and Elsa created their perfect daily schedule! Leo wakes up early at 7:00 AM and brushes his teeth right away. Elsa loves to eat a healthy breakfast at 8:00 AM before going to school. At 12:00 PM, they both enjoy lunch with their friends. After school at 3:00 PM, they do their homework together. In the evening at 6:00 PM, the family has dinner together. Finally, at 9:00 PM, they watch their favorite TV show before going to bed. What a wonderful day!
                    </div>
                </div>
            </div>

            <div class="learning-cards compact" id="scheduleCards">
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Morning', 'Kore')">
                    <div class="card-emoji">üåÖ</div>
                    <div class="card-word">Morning</div>
                </div>
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Afternoon', 'Kore')">
                    <div class="card-emoji">‚òÄÔ∏è</div>
                    <div class="card-word">Afternoon</div>
                </div>
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Evening', 'Kore')">
                    <div class="card-emoji">üåÜ</div>
                    <div class="card-word">Evening</div>
                </div>
                <div class="learning-card clickable-tts" onclick="handleCardClick(this, 'Night', 'Kore')">
                    <div class="card-emoji">üåô</div>
                    <div class="card-word">Night</div>
                </div>
            </div>

            <div class="word-bank">
                <div class="word-bank-title">üéØ Activity Bank - Drag to Schedule!</div>
                <div class="word-items" id="activityBank">
                    <div class="word-item clickable-tts" draggable="true" data-activity="wake up" onclick="handleTTSClick(this, 'wake up', 'Kore')">
                        <span>üõèÔ∏è</span> Wake up
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="brush teeth" onclick="handleTTSClick(this, 'brush teeth', 'Kore')">
                        <span>ü¶∑</span> Brush teeth
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="eat breakfast" onclick="handleTTSClick(this, 'eat breakfast', 'Kore')">
                        <span>üç≥</span> Eat breakfast
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="go to school" onclick="handleTTSClick(this, 'go to school', 'Kore')">
                        <span>üè´</span> Go to school
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="have lunch" onclick="handleTTSClick(this, 'have lunch', 'Kore')">
                        <span>üç±</span> Have lunch
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="do homework" onclick="handleTTSClick(this, 'do homework', 'Kore')">
                        <span>üìö</span> Do homework
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="play games" onclick="handleTTSClick(this, 'play games', 'Kore')">
                        <span>üéÆ</span> Play games
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="eat dinner" onclick="handleTTSClick(this, 'eat dinner', 'Kore')">
                        <span>üçΩÔ∏è</span> Eat dinner
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="watch TV" onclick="handleTTSClick(this, 'watch TV', 'Kore')">
                        <span>üì∫</span> Watch TV
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-activity="go to bed" onclick="handleTTSClick(this, 'go to bed', 'Kore')">
                        <span>üò¥</span> Go to bed
                    </div>
                </div>
            </div>

            <div class="schedule-container" id="scheduleContainer">
                <div class="time-slot clickable-tts" data-time="7:00 AM" onclick="handleTTSClick(this, 'Seven o clock in the morning', 'Kore')">
                    <div class="time-label">üåÖ 7:00 AM</div>
                    <div class="activity-display" id="slot-7am"></div>
                </div>
                <div class="time-slot clickable-tts" data-time="8:00 AM" onclick="handleTTSClick(this, 'Eight o clock in the morning', 'Kore')">
                    <div class="time-label">üåÖ 8:00 AM</div>
                    <div class="activity-display" id="slot-8am"></div>
                </div>
                <div class="time-slot clickable-tts" data-time="12:00 PM" onclick="handleTTSClick(this, 'Twelve o clock in the afternoon', 'Kore')">
                    <div class="time-label">‚òÄÔ∏è 12:00 PM</div>
                    <div class="activity-display" id="slot-12pm"></div>
                </div>
                <div class="time-slot clickable-tts" data-time="3:00 PM" onclick="handleTTSClick(this, 'Three o clock in the afternoon', 'Kore')">
                    <div class="time-label">‚òÄÔ∏è 3:00 PM</div>
                    <div class="activity-display" id="slot-3pm"></div>
                </div>
                <div class="time-slot clickable-tts" data-time="6:00 PM" onclick="handleTTSClick(this, 'Six o clock in the evening', 'Kore')">
                    <div class="time-label">üåÜ 6:00 PM</div>
                    <div class="activity-display" id="slot-6pm"></div>
                </div>
                <div class="time-slot clickable-tts" data-time="9:00 PM" onclick="handleTTSClick(this, 'Nine o clock at night', 'Kore')">
                    <div class="time-label">üåô 9:00 PM</div>
                    <div class="activity-display" id="slot-9pm"></div>
                </div>
            </div>

            <div class="dialogue-section">
                <div class="dialogue-header">üí¨ Leo & Elsa's Schedule Talk</div>
                <div class="detailed-dialogue">
                    <div class="dialogue-pair">
                        <div class="character-dialogue">
                            <div class="character-info">
                                <span class="character-avatar">üë¶</span>
                                <span class="character-name">Leo</span>
                            </div>
                            <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'What time do you wake up, Elsa? I usually wake up at seven in the morning because I like to have enough time to get ready for school.', 'Fenrir')">
                                <strong>Leo asks:</strong> "What time do you wake up, Elsa? I usually wake up at 7:00 AM because I like to have enough time to get ready for school."
                            </div>
                            <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I wake up at seven o clock every day too! My mom wakes me up gently and I brush my teeth first thing. Then I get dressed and comb my hair before going downstairs for breakfast.', 'Leda')">
                                <strong>Elsa answers:</strong> "I wake up at 7:00 AM every day too! My mom wakes me up gently and I brush my teeth first thing. Then I get dressed and comb my hair before going downstairs for breakfast."
                            </div>
                        </div>
                    </div>
                    
                    <div class="dialogue-pair">
                        <div class="character-dialogue">
                            <div class="character-info">
                                <span class="character-avatar">üëß</span>
                                <span class="character-name">Elsa</span>
                            </div>
                            <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you do homework after school, Leo? I always do my homework right after I get home because then I have more time to play later.', 'Leda')">
                                <strong>Elsa asks:</strong> "Do you do homework after school, Leo? I always do my homework right after I get home because then I have more time to play later."
                            </div>
                            <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes, I do my homework at three o clock too! I sit at my desk in my room and do math first because it is the hardest for me. Then I do reading and writing. My dad helps me if I have questions.', 'Fenrir')">
                                <strong>Leo answers:</strong> "Yes, I do my homework at 3:00 PM too! I sit at my desk in my room and do math first because it's the hardest for me. Then I do reading and writing. My dad helps me if I have questions."
                            </div>
                        </div>
                    </div>
                    
                    <div class="dialogue-pair">
                        <div class="character-dialogue">
                            <div class="character-info">
                                <span class="character-avatar">üë¶</span>
                                <span class="character-name">Leo</span>
                            </div>
                            <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'What is your favorite time of day, Elsa? Mine is dinner time because our whole family sits together and talks about our day.', 'Fenrir')">
                                <strong>Leo asks:</strong> "What's your favorite time of day, Elsa? Mine is dinner time because our whole family sits together and talks about our day."
                            </div>
                            <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I love dinner time too! But I also really like bedtime because mom reads me stories and we cuddle. She reads about princesses and adventures, and sometimes dad joins us too.', 'Leda')">
                                <strong>Elsa answers:</strong> "I love dinner time too! But I also really like bedtime because mom reads me stories and we cuddle. She reads about princesses and adventures, and sometimes dad joins us too."
                            </div>
                        </div>
                    </div>
                    
                    <div class="dialogue-pair">
                        <div class="character-dialogue">
                            <div class="character-info">
                                <span class="character-avatar">üëß</span>
                                <span class="character-name">Elsa</span>
                            </div>
                            <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you like going to school, Leo? I love school because I get to see my friends and learn new things every day. My teacher is very nice and funny.', 'Leda')">
                                <strong>Elsa asks:</strong> "Do you like going to school, Leo? I love school because I get to see my friends and learn new things every day. My teacher is very nice and funny."
                            </div>
                            <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes, I love school too! My favorite subject is science because we do cool experiments. Yesterday we made a volcano with baking soda and vinegar. It was so exciting when it erupted!', 'Fenrir')">
                                <strong>Leo answers:</strong> "Yes, I love school too! My favorite subject is science because we do cool experiments. Yesterday we made a volcano with baking soda and vinegar. It was so exciting when it erupted!"
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Learning Mode 2: Breakfast Words -->
        <div class="page" id="learning-2">
             <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Breakfast Foods</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            <div class="learning-cards" id="learningCards2">
                <div class="learning-card" data-word="pancakes" data-voice="Kore"><div class="card-emoji">ü•û</div><div class="card-word">pancakes</div></div>
                <div class="learning-card" data-word="eggs" data-voice="Leda"><div class="card-emoji">üç≥</div><div class="card-word">eggs</div></div>
                <div class="learning-card" data-word="toast" data-voice="Orus"><div class="card-emoji">üçû</div><div class="card-word">toast</div></div>
                <div class="learning-card" data-word="cereal" data-voice="Fenrir"><div class="card-emoji">ü•£</div><div class="card-word">cereal</div></div>
                <div class="learning-card" data-word="waffles" data-voice="Charon"><div class="card-emoji">üßá</div><div class="card-word">waffles</div></div>
                <div class="learning-card" data-word="banana" data-voice="Kore"><div class="card-emoji">üçå</div><div class="card-word">banana</div></div>
                <div class="learning-card" data-word="apple" data-voice="Leda"><div class="card-emoji">üçé</div><div class="card-word">apple</div></div>
                <div class="learning-card" data-word="milk" data-voice="Orus"><div class="card-emoji">ü•õ</div><div class="card-word">milk</div></div>
                <div class="learning-card" data-word="juice" data-voice="Fenrir"><div class="card-emoji">üßÉ</div><div class="card-word">juice</div></div>
            </div>
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress2">0/9</span></div>
                <button class="nav-button" onclick="skipToPage(2)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(2)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 2: Breakfast Menu -->
        <div class="page" id="page-2">
            <div class="page-header">
                <h1 class="page-title">üç≥ Breakfast Menu</h1>
                <p>Choose your favorite breakfast foods!</p>
            </div>

            <div class="learning-cards" id="breakfastCards">
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Breakfast', 'Kore')">
                    <div class="card-emoji">üç≥</div>
                    <div class="card-word">Breakfast</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Delicious', 'Kore')">
                    <div class="card-emoji">üòã</div>
                    <div class="card-word">Delicious</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Healthy', 'Kore')">
                    <div class="card-emoji">üí™</div>
                    <div class="card-word">Healthy</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Yummy', 'Kore')">
                    <div class="card-emoji">ü§§</div>
                    <div class="card-word">Yummy</div>
                </div>
            </div>

            <div class="word-bank">
                <div class="word-bank-title">üç≥ Breakfast Foods - Drag to Your Plate!</div>
                <div class="word-items" id="breakfastBank">
                    <div class="word-item clickable-tts" draggable="true" data-food="pancakes" onclick="handleTTSClick(this, 'pancakes', 'Kore')">
                        <span>ü•û</span> Pancakes
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="eggs" onclick="handleTTSClick(this, 'eggs', 'Kore')">
                        <span>üç≥</span> Eggs
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="toast" onclick="handleTTSClick(this, 'toast', 'Kore')">
                        <span>üçû</span> Toast
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="cereal" onclick="handleTTSClick(this, 'cereal', 'Kore')">
                        <span>ü•£</span> Cereal
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="oatmeal" onclick="handleTTSClick(this, 'oatmeal', 'Kore')">
                        <span>ü•£</span> Oatmeal
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="waffles" onclick="handleTTSClick(this, 'waffles', 'Kore')">
                        <span>üßá</span> Waffles
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="banana" onclick="handleTTSClick(this, 'banana', 'Kore')">
                        <span>üçå</span> Banana
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="apple" onclick="handleTTSClick(this, 'apple', 'Kore')">
                        <span>üçé</span> Apple
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="milk" onclick="handleTTSClick(this, 'milk', 'Kore')">
                        <span>ü•õ</span> Milk
                    </div>
                    <div class="word-item clickable-tts" draggable="true" data-food="juice" onclick="handleTTSClick(this, 'juice', 'Kore')">
                        <span>üßÉ</span> Juice
                    </div>
                </div>
            </div>

            <div class="menu-grid">
                <div class="menu-category">
                    <div class="category-title">üçΩÔ∏è Leo's Breakfast Plate</div>
                    <div class="selected-items breakfast-plate" id="leoBreakfastPlate" data-character="leo">
                        <p>Drag foods here for Leo!</p>
                    </div>
                </div>
                <div class="menu-category">
                    <div class="category-title">üçΩÔ∏è Elsa's Breakfast Plate</div>
                    <div class="selected-items breakfast-plate" id="elsaBreakfastPlate" data-character="elsa">
                        <p>Drag foods here for Elsa!</p>
                    </div>
                </div>
                <div class="menu-category">
                    <div class="category-title">üçì Fruits</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'banana')">üçå Banana</div>
                        <div class="menu-item" onclick="handleSelection(this, 'apple')">üçé Apple</div>
                        <div class="menu-item" onclick="handleSelection(this, 'strawberry')">üçì Strawberry</div>
                        <div class="menu-item" onclick="handleSelection(this, 'orange')">üçä Orange</div>
                        <div class="menu-item" onclick="handleSelection(this, 'grapes')">üçá Grapes</div>
                    </div>
                </div>
                <div class="menu-category">
                    <div class="category-title">ü•õ Drinks</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'milk')">ü•õ Milk</div>
                        <div class="menu-item" onclick="handleSelection(this, 'juice')">üßÉ Juice</div>
                        <div class="menu-item" onclick="handleSelection(this, 'water')">üíß Water</div>
                        <div class="menu-item" onclick="handleSelection(this, 'tea')">üçµ Tea</div>
                    </div>
                </div>
            </div>

            <div class="selected-items">
                <div class="word-bank-title">üçΩÔ∏è My Breakfast Selection</div>
                <div id="breakfastSelection" class="word-items"></div>
            </div>

            <div class="dialogue-section">
                <div class="dialogue-header">üí¨ Breakfast Conversation</div>
                <div class="question-container">
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you like pancakes for breakfast?', 'Fenrir')">
                            <strong>Leo asks:</strong> "Do you like pancakes for breakfast?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes, I love pancakes with strawberries!', 'Leda')">
                            "Yes, I love pancakes with strawberries!"
                        </div>
                    </div>
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'What do you drink in the morning?', 'Leda')">
                            <strong>Elsa asks:</strong> "What do you drink in the morning?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I drink milk and orange juice!', 'Fenrir')">
                            "I drink milk and orange juice!"
                        </div>
                    </div>
                </div>
            </div>

            <div class="think-pair-share">
                <div class="tps-title">ü§î Think-Pair-Share: Favorite Breakfast</div>
                <div class="tps-phases">
                    <div class="tps-phase">
                        <div class="phase-icon">ü§î</div>
                        <div class="phase-title">Think</div>
                        <div class="phase-timer" id="thinkTimer2">1:00</div>
                        <button class="timer-button" onclick="startTimer('think', 1, 'thinkTimer2')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üë•</div>
                        <div class="phase-title">Pair</div>
                        <div class="phase-timer" id="pairTimer2">2:00</div>
                        <button class="timer-button" onclick="startTimer('pair', 2, 'pairTimer2')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üó£Ô∏è</div>
                        <div class="phase-title">Share</div>
                        <div class="phase-timer" id="shareTimer2">3:00</div>
                        <button class="timer-button" onclick="startTimer('share', 3, 'shareTimer2')">Start</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="story-title">üìñ The Best Breakfast Ever</div>
                <div class="story-content">
                    Leo and Elsa love breakfast time! Leo's favorite breakfast is fluffy pancakes with fresh strawberries and a tall glass of cold milk. Elsa prefers scrambled eggs with toast and a cup of orange juice. They both agree that breakfast is the most important meal of the day because it gives them energy to learn and play. Sometimes they share their food and try new combinations. Their mom always says, "A good breakfast makes a great day!"
                </div>
            </div>
        </div>
        
        <!-- Learning Mode 3: Lunch Words -->
        <div class="page" id="learning-3">
             <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Lunch Foods</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            <div class="learning-cards" id="learningCards3">
                <div class="learning-card" data-word="rice" data-voice="Kore"><div class="card-emoji">üçö</div><div class="card-word">rice</div></div>
                <div class="learning-card" data-word="noodles" data-voice="Leda"><div class="card-emoji">üçú</div><div class="card-word">noodles</div></div>
                <div class="learning-card" data-word="sandwich" data-voice="Orus"><div class="card-emoji">ü•™</div><div class="card-word">sandwich</div></div>
                <div class="learning-card" data-word="pizza" data-voice="Fenrir"><div class="card-emoji">üçï</div><div class="card-word">pizza</div></div>
                <div class="learning-card" data-word="broccoli" data-voice="Charon"><div class="card-emoji">ü•¶</div><div class="card-word">broccoli</div></div>
                <div class="learning-card" data-word="carrots" data-voice="Kore"><div class="card-emoji">ü•ï</div><div class="card-word">carrots</div></div>
                <div class="learning-card" data-word="soup" data-voice="Leda"><div class="card-emoji">üç≤</div><div class="card-word">soup</div></div>
            </div>
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress3">0/7</span></div>
                <button class="nav-button" onclick="skipToPage(3)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(3)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 3: Lunch Menu -->
        <div class="page" id="page-3">
            <div class="page-header">
                <h1 class="page-title">üç± Lunch Menu</h1>
                <p>What's for lunch today?</p>
            </div>

            <div class="learning-cards" id="lunchCards">
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Lunch', 'Kore')">
                    <div class="card-emoji">üç±</div>
                    <div class="card-word">Lunch</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Tasty', 'Kore')">
                    <div class="card-emoji">üòã</div>
                    <div class="card-word">Tasty</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Fresh', 'Kore')">
                    <div class="card-emoji">üåø</div>
                    <div class="card-word">Fresh</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Nutritious', 'Kore')">
                    <div class="card-emoji">ü•ó</div>
                    <div class="card-word">Nutritious</div>
                </div>
            </div>

            <div class="menu-grid">
                <div class="menu-category">
                    <div class="category-title">üçö Main Dishes</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'rice')">üçö Rice</div>
                        <div class="menu-item" onclick="handleSelection(this, 'noodles')">üçú Noodles</div>
                        <div class="menu-item" onclick="handleSelection(this, 'sandwich')">ü•™ Sandwich</div>
                        <div class="menu-item" onclick="handleSelection(this, 'dumplings')">ü•ü Dumplings</div>
                        <div class="menu-item" onclick="handleSelection(this, 'fried rice')">üçõ Fried Rice</div>
                        <div class="menu-item" onclick="handleSelection(this, 'pizza')">üçï Pizza</div>
                    </div>
                </div>
                <div class="menu-category">
                    <div class="category-title">ü•¨ Vegetables</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'broccoli')">ü•¶ Broccoli</div>
                        <div class="menu-item" onclick="handleSelection(this, 'carrots')">ü•ï Carrots</div>
                        <div class="menu-item" onclick="handleSelection(this, 'lettuce')">ü•¨ Lettuce</div>
                        <div class="menu-item" onclick="handleSelection(this, 'tomato')">üçÖ Tomato</div>
                        <div class="menu-item" onclick="handleSelection(this, 'cucumber')">ü•í Cucumber</div>
                    </div>
                </div>
                <div class="menu-category">
                    <div class="category-title">ü•§ Drinks</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'water')">üíß Water</div>
                        <div class="menu-item" onclick="handleSelection(this, 'soup')">üç≤ Soup</div>
                        <div class="menu-item" onclick="handleSelection(this, 'tea')">üçµ Tea</div>
                        <div class="menu-item" onclick="handleSelection(this, 'juice')">üßÉ Juice</div>
                    </div>
                </div>
            </div>

            <div class="selected-items">
                <div class="word-bank-title">üçΩÔ∏è My Lunch Selection</div>
                <div id="lunchSelection" class="word-items"></div>
            </div>

            <div class="dialogue-section">
                <div class="dialogue-header">üí¨ Lunch Time Chat</div>
                <div class="question-container">
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you want to eat rice or noodles?', 'Fenrir')">
                            <strong>Leo asks:</strong> "Do you want to eat rice or noodles?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I want noodles with vegetables, please!', 'Leda')">
                            "I want noodles with vegetables, please!"
                        </div>
                    </div>
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you like soup for lunch?', 'Leda')">
                            <strong>Elsa asks:</strong> "Do you like soup for lunch?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes, I love hot soup on cold days!', 'Fenrir')">
                            "Yes, I love hot soup on cold days!"
                        </div>
                    </div>
                </div>
            </div>

            <div class="think-pair-share">
                <div class="tps-title">ü§î Think-Pair-Share: Healthy Lunch</div>
                <div class="tps-phases">
                    <div class="tps-phase">
                        <div class="phase-icon">ü§î</div>
                        <div class="phase-title">Think</div>
                        <div class="phase-timer" id="thinkTimer3">1:00</div>
                        <button class="timer-button" onclick="startTimer('think', 1, 'thinkTimer3')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üë•</div>
                        <div class="phase-title">Pair</div>
                        <div class="phase-timer" id="pairTimer3">2:00</div>
                        <button class="timer-button" onclick="startTimer('pair', 2, 'pairTimer3')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üó£Ô∏è</div>
                        <div class="phase-title">Share</div>
                        <div class="phase-timer" id="shareTimer3">3:00</div>
                        <button class="timer-button" onclick="startTimer('share', 3, 'shareTimer3')">Start</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="story-title">üìñ Lunchtime Adventures</div>
                <div class="story-content">
                    At school, Leo and Elsa enjoy lunchtime with their classmates. Leo brings a lunch box with fried rice, broccoli, and a bottle of water. Elsa loves her noodle soup with carrots and cucumber. They always share their food and try each other's lunch. "Sharing makes food taste better!" says Elsa. Leo agrees and adds, "And eating vegetables makes us strong and smart!" Their teacher is proud of their healthy eating habits.
                </div>
            </div>
        </div>
        
        <!-- Learning Mode 4: Dinner Words -->
        <div class="page" id="learning-4">
             <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Dinner Foods</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            <div class="learning-cards" id="learningCards4">
                <div class="learning-card" data-word="chicken" data-voice="Kore"><div class="card-emoji">üçó</div><div class="card-word">chicken</div></div>
                <div class="learning-card" data-word="fish" data-voice="Leda"><div class="card-emoji">üêü</div><div class="card-word">fish</div></div>
                <div class="learning-card" data-word="pasta" data-voice="Orus"><div class="card-emoji">üçù</div><div class="card-word">pasta</div></div>
                <div class="learning-card" data-word="potatoes" data-voice="Fenrir"><div class="card-emoji">ü•î</div><div class="card-word">potatoes</div></div>
                <div class="learning-card" data-word="salad" data-voice="Charon"><div class="card-emoji">ü•ó</div><div class="card-word">salad</div></div>
                <div class="learning-card" data-word="ice cream" data-voice="Kore"><div class="card-emoji">üç®</div><div class="card-word">ice cream</div></div>
                <div class="learning-card" data-word="cake" data-voice="Leda"><div class="card-emoji">üç∞</div><div class="card-word">cake</div></div>
            </div>
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress4">0/7</span></div>
                <button class="nav-button" onclick="skipToPage(4)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(4)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 4: Dinner Menu -->
        <div class="page" id="page-4">
            <div class="page-header">
                <h1 class="page-title">üçΩÔ∏è Dinner Menu</h1>
                <p>Family dinner time!</p>
            </div>

            <div class="learning-cards" id="dinnerCards">
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Dinner', 'Kore')">
                    <div class="card-emoji">üçΩÔ∏è</div>
                    <div class="card-word">Dinner</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Family', 'Kore')">
                    <div class="card-emoji">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <div class="card-word">Family</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Together', 'Kore')">
                    <div class="card-emoji">ü§ù</div>
                    <div class="card-word">Together</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Delicious', 'Kore')">
                    <div class="card-emoji">üòã</div>
                    <div class="card-word">Delicious</div>
                </div>
            </div>

            <div class="menu-grid">
                <div class="menu-category">
                    <div class="category-title">üçñ Main Courses</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'chicken')">üçó Chicken</div>
                        <div class="menu-item" onclick="handleSelection(this, 'fish')">üêü Fish</div>
                        <div class="menu-item" onclick="handleSelection(this, 'beef')">ü•© Beef</div>
                        <div class="menu-item" onclick="handleSelection(this, 'pork')">ü•ì Pork</div>
                        <div class="menu-item" onclick="handleSelection(this, 'tofu')">üßà Tofu</div>
                        <div class="menu-item" onclick="handleSelection(this, 'pasta')">üçù Pasta</div>
                    </div>
                </div>
                <div class="menu-category">
                    <div class="category-title">ü•î Side Dishes</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'potatoes')">ü•î Potatoes</div>
                        <div class="menu-item" onclick="handleSelection(this, 'corn')">üåΩ Corn</div>
                        <div class="menu-item" onclick="handleSelection(this, 'green beans')">ü´ò Green Beans</div>
                        <div class="menu-item" onclick="handleSelection(this, 'mushrooms')">üçÑ Mushrooms</div>
                        <div class="menu-item" onclick="handleSelection(this, 'salad')">ü•ó Salad</div>
                    </div>
                </div>
                <div class="menu-category">
                    <div class="category-title">üç® Desserts</div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="handleSelection(this, 'ice cream')">üç® Ice Cream</div>
                        <div class="menu-item" onclick="handleSelection(this, 'cake')">üç∞ Cake</div>
                        <div class="menu-item" onclick="handleSelection(this, 'fruit')">üçé Fruit</div>
                        <div class="menu-item" onclick="handleSelection(this, 'cookies')">üç™ Cookies</div>
                    </div>
                </div>
            </div>

            <div class="selected-items">
                <div class="word-bank-title">üçΩÔ∏è My Dinner Selection</div>
                <div id="dinnerSelection" class="word-items"></div>
            </div>

            <div class="dialogue-section">
                <div class="dialogue-header">üí¨ Dinner Conversation</div>
                <div class="question-container">
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'What is your favorite dinner food?', 'Fenrir')">
                            <strong>Leo asks:</strong> "What's your favorite dinner food?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I love chicken with potatoes and salad!', 'Leda')">
                            "I love chicken with potatoes and salad!"
                        </div>
                    </div>
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you want ice cream for dessert?', 'Leda')">
                            <strong>Elsa asks:</strong> "Do you want ice cream for dessert?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes, please! I love chocolate ice cream!', 'Fenrir')">
                            "Yes, please! I love chocolate ice cream!"
                        </div>
                    </div>
                </div>
            </div>

            <div class="think-pair-share">
                <div class="tps-title">ü§î Think-Pair-Share: Family Dinner</div>
                <div class="tps-phases">
                    <div class="tps-phase">
                        <div class="phase-icon">ü§î</div>
                        <div class="phase-title">Think</div>
                        <div class="phase-timer" id="thinkTimer4">1:00</div>
                        <button class="timer-button" onclick="startTimer('think', 1, 'thinkTimer4')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üë•</div>
                        <div class="phase-title">Pair</div>
                        <div class="phase-timer" id="pairTimer4">2:00</div>
                        <button class="timer-button" onclick="startTimer('pair', 2, 'pairTimer4')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üó£Ô∏è</div>
                        <div class="phase-title">Share</div>
                        <div class="phase-timer" id="shareTimer4">3:00</div>
                        <button class="timer-button" onclick="startTimer('share', 3, 'shareTimer4')">Start</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="story-title">üìñ Family Dinner Time</div>
                <div class="story-content">
                    Every evening, Leo and Elsa's family gathers around the dinner table. Tonight, Mom cooked delicious grilled chicken with roasted potatoes and fresh salad. Dad tells funny stories about his day at work while they eat. Leo and Elsa share what they learned at school. After the main course, they enjoy chocolate ice cream for dessert. "Family dinner is the best time of the day," says Leo. Elsa nods and adds, "Because we're all together!"
                </div>
            </div>
        </div>

        <!-- Learning Mode 5: Hobby Words -->
        <div class="page" id="learning-5">
             <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Hobbies</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            <div class="learning-cards" id="learningCards5">
                <div class="learning-card" data-word="drawing" data-voice="Kore"><div class="card-emoji">‚úèÔ∏è</div><div class="card-word">drawing</div></div>
                <div class="learning-card" data-word="reading" data-voice="Leda"><div class="card-emoji">üìö</div><div class="card-word">reading</div></div>
                <div class="learning-card" data-word="music" data-voice="Orus"><div class="card-emoji">üéµ</div><div class="card-word">music</div></div>
                <div class="learning-card" data-word="dancing" data-voice="Fenrir"><div class="card-emoji">üíÉ</div><div class="card-word">dancing</div></div>
                <div class="learning-card" data-word="cooking" data-voice="Charon"><div class="card-emoji">üë®‚Äçüç≥</div><div class="card-word">cooking</div></div>
                <div class="learning-card" data-word="gardening" data-voice="Kore"><div class="card-emoji">üå±</div><div class="card-word">gardening</div></div>
            </div>
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress5">0/6</span></div>
                <button class="nav-button" onclick="skipToPage(5)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(5)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 5: Hobbies -->
        <div class="page" id="page-5">
            <div class="page-header">
                <h1 class="page-title">üé® Our Hobbies</h1>
                <p>What do you like to do in your free time?</p>
            </div>

            <div class="learning-cards" id="hobbyCards">
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Hobbies', 'Kore')">
                    <div class="card-emoji">üé®</div>
                    <div class="card-word">Hobbies</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Creative', 'Kore')">
                    <div class="card-emoji">üí°</div>
                    <div class="card-word">Creative</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Fun', 'Kore')">
                    <div class="card-emoji">üéâ</div>
                    <div class="card-word">Fun</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Enjoy', 'Kore')">
                    <div class="card-emoji">üòä</div>
                    <div class="card-word">Enjoy</div>
                </div>
            </div>

            <div class="hobby-grid">
                <div class="hobby-item" onclick="handleSelection(this, 'drawing')">
                    <div class="hobby-emoji">‚úèÔ∏è</div>
                    <div class="hobby-name">Drawing</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'reading')">
                    <div class="hobby-emoji">üìö</div>
                    <div class="hobby-name">Reading</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'music')">
                    <div class="hobby-emoji">üéµ</div>
                    <div class="hobby-name">Music</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'dancing')">
                    <div class="hobby-emoji">üíÉ</div>
                    <div class="hobby-name">Dancing</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'cooking')">
                    <div class="hobby-emoji">üë®‚Äçüç≥</div>
                    <div class="hobby-name">Cooking</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'gardening')">
                    <div class="hobby-emoji">üå±</div>
                    <div class="hobby-name">Gardening</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'photography')">
                    <div class="hobby-emoji">üì∏</div>
                    <div class="hobby-name">Photography</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'crafts')">
                    <div class="hobby-emoji">‚úÇÔ∏è</div>
                    <div class="hobby-name">Crafts</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'writing')">
                    <div class="hobby-emoji">‚úçÔ∏è</div>
                    <div class="hobby-name">Writing</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'collecting')">
                    <div class="hobby-emoji">üéØ</div>
                    <div class="hobby-name">Collecting</div>
                </div>
            </div>

            <div class="selected-items">
                <div class="word-bank-title">üé® My Favorite Hobbies</div>
                <div id="hobbiesSelection" class="word-items"></div>
            </div>

            <div class="dialogue-section">
                <div class="dialogue-header">üí¨ Hobby Talk</div>
                <div class="question-container">
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you like to draw pictures?', 'Fenrir')">
                            <strong>Leo asks:</strong> "Do you like to draw pictures?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes! I love drawing animals and flowers!', 'Leda')">
                            "Yes! I love drawing animals and flowers!"
                        </div>
                    </div>
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'What is your favorite hobby?', 'Leda')">
                            <strong>Elsa asks:</strong> "What's your favorite hobby?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I love reading adventure books!', 'Fenrir')">
                            "I love reading adventure books!"
                        </div>
                    </div>
                </div>
            </div>

            <div class="think-pair-share">
                <div class="tps-title">ü§î Think-Pair-Share: Creative Hobbies</div>
                <div class="tps-phases">
                    <div class="tps-phase">
                        <div class="phase-icon">ü§î</div>
                        <div class="phase-title">Think</div>
                        <div class="phase-timer" id="thinkTimer5">1:00</div>
                        <button class="timer-button" onclick="startTimer('think', 1, 'thinkTimer5')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üë•</div>
                        <div class="phase-title">Pair</div>
                        <div class="phase-timer" id="pairTimer5">2:00</div>
                        <button class="timer-button" onclick="startTimer('pair', 2, 'pairTimer5')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üó£Ô∏è</div>
                        <div class="phase-title">Share</div>
                        <div class="phase-timer" id="shareTimer5">3:00</div>
                        <button class="timer-button" onclick="startTimer('share', 3, 'shareTimer5')">Start</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="story-title">üìñ Hobby Adventures</div>
                <div class="story-content">
                    Leo and Elsa have many exciting hobbies! Leo loves to read adventure books about brave heroes and magical worlds. He also enjoys drawing pictures of dragons and castles. Elsa is passionate about music and plays the piano beautifully. She also loves gardening and grows colorful flowers in her small garden. On weekends, they sometimes do crafts together, making friendship bracelets and paper airplanes. Their hobbies make them creative and happy!
                </div>
            </div>
        </div>
        
        <!-- Learning Mode 6: Saturday Words -->
        <div class="page" id="learning-6">
             <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Saturday Activities</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            <div class="learning-cards" id="learningCards6">
                <div class="learning-card" data-word="soccer" data-voice="Kore"><div class="card-emoji">‚öΩ</div><div class="card-word">soccer</div></div>
                <div class="learning-card" data-word="basketball" data-voice="Leda"><div class="card-emoji">üèÄ</div><div class="card-word">basketball</div></div>
                <div class="learning-card" data-word="swimming" data-voice="Orus"><div class="card-emoji">üèä‚Äç‚ôÇÔ∏è</div><div class="card-word">swimming</div></div>
                <div class="learning-card" data-word="cycling" data-voice="Fenrir"><div class="card-emoji">üö¥‚Äç‚ôÄÔ∏è</div><div class="card-word">cycling</div></div>
                <div class="learning-card" data-word="running" data-voice="Charon"><div class="card-emoji">üèÉ‚Äç‚ôÇÔ∏è</div><div class="card-word">running</div></div>
                <div class="learning-card" data-word="tennis" data-voice="Kore"><div class="card-emoji">üéæ</div><div class="card-word">tennis</div></div>
                <div class="learning-card" data-word="hiking" data-voice="Leda"><div class="card-emoji">ü•æ</div><div class="card-word">hiking</div></div>
            </div>
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress6">0/7</span></div>
                <button class="nav-button" onclick="skipToPage(6)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(6)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 6: Saturday Activities -->
        <div class="page" id="page-6">
            <div class="page-header">
                <h1 class="page-title">üèÉ‚Äç‚ôÇÔ∏è Saturday Sports & Activities</h1>
                <p>Weekend fun and sports!</p>
            </div>

            <div class="learning-cards" id="saturdayCards">
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Saturday', 'Kore')">
                    <div class="card-emoji">üìÖ</div>
                    <div class="card-word">Saturday</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Sports', 'Kore')">
                    <div class="card-emoji">‚öΩ</div>
                    <div class="card-word">Sports</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Active', 'Kore')">
                    <div class="card-emoji">üí™</div>
                    <div class="card-word">Active</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Exercise', 'Kore')">
                    <div class="card-emoji">üèÉ‚Äç‚ôÇÔ∏è</div>
                    <div class="card-word">Exercise</div>
                </div>
            </div>

            <div class="hobby-grid">
                <div class="hobby-item" onclick="handleSelection(this, 'soccer')">
                    <div class="hobby-emoji">‚öΩ</div>
                    <div class="hobby-name">Soccer</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'basketball')">
                    <div class="hobby-emoji">üèÄ</div>
                    <div class="hobby-name">Basketball</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'swimming')">
                    <div class="hobby-emoji">üèä‚Äç‚ôÇÔ∏è</div>
                    <div class="hobby-name">Swimming</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'cycling')">
                    <div class="hobby-emoji">üö¥‚Äç‚ôÄÔ∏è</div>
                    <div class="hobby-name">Cycling</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'running')">
                    <div class="hobby-emoji">üèÉ‚Äç‚ôÇÔ∏è</div>
                    <div class="hobby-name">Running</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'tennis')">
                    <div class="hobby-emoji">üéæ</div>
                    <div class="hobby-name">Tennis</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'badminton')">
                    <div class="hobby-emoji">üè∏</div>
                    <div class="hobby-name">Badminton</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'skating')">
                    <div class="hobby-emoji">‚õ∏Ô∏è</div>
                    <div class="hobby-name">Skating</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'hiking')">
                    <div class="hobby-emoji">ü•æ</div>
                    <div class="hobby-name">Hiking</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'playground')">
                    <div class="hobby-emoji">üõù</div>
                    <div class="hobby-name">Playground</div>
                </div>
            </div>

            <div class="selected-items">
                <div class="word-bank-title">üèÉ‚Äç‚ôÇÔ∏è My Saturday Activities</div>
                <div id="saturdaySelection" class="word-items"></div>
            </div>

            <div class="dialogue-section">
                <div class="dialogue-header">üí¨ Sports Talk</div>
                <div class="question-container">
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you want to play soccer on Saturday?', 'Fenrir')">
                            <strong>Leo asks:</strong> "Do you want to play soccer on Saturday?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes! I love playing soccer with friends!', 'Leda')">
                            "Yes! I love playing soccer with friends!"
                        </div>
                    </div>
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you like swimming or cycling more?', 'Leda')">
                            <strong>Elsa asks:</strong> "Do you like swimming or cycling more?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I like both! Swimming is cool and cycling is fun!', 'Fenrir')">
                            "I like both! Swimming is cool and cycling is fun!"
                        </div>
                    </div>
                </div>
            </div>

            <div class="think-pair-share">
                <div class="tps-title">ü§î Think-Pair-Share: Weekend Sports</div>
                <div class="tps-phases">
                    <div class="tps-phase">
                        <div class="phase-icon">ü§î</div>
                        <div class="phase-title">Think</div>
                        <div class="phase-timer" id="thinkTimer6">1:00</div>
                        <button class="timer-button" onclick="startTimer('think', 1, 'thinkTimer6')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üë•</div>
                        <div class="phase-title">Pair</div>
                        <div class="phase-timer" id="pairTimer6">2:00</div>
                        <button class="timer-button" onclick="startTimer('pair', 2, 'pairTimer6')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üó£Ô∏è</div>
                        <div class="phase-title">Share</div>
                        <div class="phase-timer" id="shareTimer6">3:00</div>
                        <button class="timer-button" onclick="startTimer('share', 3, 'shareTimer6')">Start</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="story-title">üìñ Saturday Sports Day</div>
                <div class="story-content">
                    Saturday is Leo and Elsa's favorite day for sports and outdoor activities! In the morning, they go to the park to play soccer with their friends. Leo is good at kicking the ball, and Elsa is an excellent goalkeeper. After lunch, they ride their bicycles around the neighborhood, racing each other to the playground. In the afternoon, they go swimming at the community pool. "Exercise makes us strong and healthy!" says Leo. Elsa agrees, "And it's so much fun too!"
                </div>
            </div>
        </div>
        
        <!-- Learning Mode 7: Sunday Words -->
        <div class="page" id="learning-7">
             <div class="page-header">
                <h1 class="page-title">üìö Learning Time: Sunday Activities</h1>
                <p>Let's learn these words! Each card will show for 6 seconds.</p>
            </div>
            <div class="learning-cards" id="learningCards7">
                <div class="learning-card" data-word="movies" data-voice="Kore"><div class="card-emoji">üé¨</div><div class="card-word">movies</div></div>
                <div class="learning-card" data-word="board games" data-voice="Leda"><div class="card-emoji">üé≤</div><div class="card-word">board games</div></div>
                <div class="learning-card" data-word="picnic" data-voice="Orus"><div class="card-emoji">üß∫</div><div class="card-word">picnic</div></div>
                <div class="learning-card" data-word="zoo visit" data-voice="Fenrir"><div class="card-emoji">ü¶Å</div><div class="card-word">zoo visit</div></div>
                <div class="learning-card" data-word="baking" data-voice="Charon"><div class="card-emoji">üßÅ</div><div class="card-word">baking</div></div>
                <div class="learning-card" data-word="puzzles" data-voice="Kore"><div class="card-emoji">üß©</div><div class="card-word">puzzles</div></div>
            </div>
            <div class="learning-progress">
                <div class="progress-text">Learning Progress: <span id="learningProgress7">0/6</span></div>
                <button class="nav-button" onclick="skipToPage(7)" style="margin-top: 10px;">Skip</button>
                <button class="nav-button" onclick="repeatLearning(7)" style="margin-top: 10px;">Repeat</button>
            </div>
        </div>

        <!-- Page 7: Sunday Activities -->
        <div class="page" id="page-7">
            <div class="page-header">
                <h1 class="page-title">üåû Sunday Fun Activities</h1>
                <p>Relaxing Sunday activities for children!</p>
            </div>

            <div class="learning-cards" id="sundayCards">
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Sunday', 'Kore')">
                    <div class="card-emoji">üåû</div>
                    <div class="card-word">Sunday</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Relax', 'Kore')">
                    <div class="card-emoji">üòå</div>
                    <div class="card-word">Relax</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Family', 'Kore')">
                    <div class="card-emoji">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <div class="card-word">Family</div>
                </div>
                <div class="learning-card" onclick="flashCard(this); handleTTSClick(this, 'Peaceful', 'Kore')">
                    <div class="card-emoji">üïäÔ∏è</div>
                    <div class="card-word">Peaceful</div>
                </div>
            </div>

            <div class="hobby-grid">
                <div class="hobby-item" onclick="handleSelection(this, 'movies')">
                    <div class="hobby-emoji">üé¨</div>
                    <div class="hobby-name">Movies</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'board games')">
                    <div class="hobby-emoji">üé≤</div>
                    <div class="hobby-name">Board Games</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'picnic')">
                    <div class="hobby-emoji">üß∫</div>
                    <div class="hobby-name">Picnic</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'zoo visit')">
                    <div class="hobby-emoji">ü¶Å</div>
                    <div class="hobby-name">Zoo Visit</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'baking')">
                    <div class="hobby-emoji">üßÅ</div>
                    <div class="hobby-name">Baking</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'puzzles')">
                    <div class="hobby-emoji">üß©</div>
                    <div class="hobby-name">Puzzles</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'park visit')">
                    <div class="hobby-emoji">üå≥</div>
                    <div class="hobby-name">Park Visit</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'art projects')">
                    <div class="hobby-emoji">üé®</div>
                    <div class="hobby-name">Art Projects</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'story time')">
                    <div class="hobby-emoji">üìñ</div>
                    <div class="hobby-name">Story Time</div>
                </div>
                <div class="hobby-item" onclick="handleSelection(this, 'video games')">
                    <div class="hobby-emoji">üéÆ</div>
                    <div class="hobby-name">Video Games</div>
                </div>
            </div>

            <div class="selected-items">
                <div class="word-bank-title">üåû My Sunday Activities</div>
                <div id="sundaySelection" class="word-items"></div>
            </div>

            <div class="dialogue-section">
                <div class="dialogue-header">üí¨ Sunday Plans</div>
                <div class="question-container">
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you want to watch a movie on Sunday?', 'Fenrir')">
                            <strong>Leo asks:</strong> "Do you want to watch a movie on Sunday?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'Yes! Let us watch a funny cartoon together!', 'Leda')">
                            "Yes! Let's watch a funny cartoon together!"
                        </div>
                    </div>
                    <div class="character-dialogue">
                        <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Do you like to bake cookies with mom?', 'Leda')">
                            <strong>Elsa asks:</strong> "Do you like to bake cookies with mom?"
                        </div>
                        <div class="dialogue-answer clickable-tts" onclick="handleTTSClick(this, 'I love baking! Chocolate chip cookies are my favorite!', 'Fenrir')">
                            "I love baking! Chocolate chip cookies are my favorite!"
                        </div>
                    </div>
                </div>
            </div>

            <div class="think-pair-share">
                <div class="tps-title">ü§î Think-Pair-Share: Perfect Sunday</div>
                <div class="tps-phases">
                    <div class="tps-phase">
                        <div class="phase-icon">ü§î</div>
                        <div class="phase-title">Think</div>
                        <div class="phase-timer" id="thinkTimer7">1:00</div>
                        <button class="timer-button" onclick="startTimer('think', 1, 'thinkTimer7')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üë•</div>
                        <div class="phase-title">Pair</div>
                        <div class="phase-timer" id="pairTimer7">2:00</div>
                        <button class="timer-button" onclick="startTimer('pair', 2, 'pairTimer7')">Start</button>
                    </div>
                    <div class="tps-phase">
                        <div class="phase-icon">üó£Ô∏è</div>
                        <div class="phase-title">Share</div>
                        <div class="phase-timer" id="shareTimer7">3:00</div>
                        <button class="timer-button" onclick="startTimer('share', 3, 'shareTimer7')">Start</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="story-title">üìñ Perfect Sunday Together</div>
                <div class="story-content">
                    Sunday is Leo and Elsa's family day! They start the morning by helping mom bake delicious chocolate chip cookies. The sweet smell fills the whole house! After breakfast, they work on a big 1000-piece puzzle together on the dining table. In the afternoon, the family goes to the park for a picnic under the big oak tree. They play board games on a blanket and watch the clouds in the sky. In the evening, they snuggle on the couch to watch their favorite family movie. "Sundays are perfect for being together," says Elsa. Leo smiles and hugs his sister, "Every day is better with family!"
                </div>
            </div>
        </div>
        
        <!-- Page Verb Test -->
        <div class="page" id="page-verb-test">
            <div class="page-header">
                <h1 class="page-title">üìù Verb Tense Challenge</h1>
                <p>Fill in the blanks with the correct form of the verb!</p>
            </div>
    
            <div class="verb-test-container">
                <div class="verb-section">
                    <h3>Present Tense Practice</h3>
                    <p>Use the simple present tense (e.g., I play, Leo plays).</p>
                    <ul class="verb-questions">
                        <li>I <input type="text" data-answer="wake up" placeholder="..."> (wake up) at 7 AM.</li>
                        <li>Elsa <input type="text" data-answer="plays" placeholder="..."> (play) the piano.</li>
                        <li>Leo <input type="text" data-answer="reads" placeholder="..."> (read) adventure books.</li>
                        <li>I <input type="text" data-answer="eat" placeholder="..."> (eat) breakfast in the morning.</li>
                        <li>Leo and Elsa <input type="text" data-answer="do" placeholder="..."> (do) their homework together.</li>
                    </ul>
                </div>
    
                <div class="verb-section">
                    <h3>Continuous Tense Practice</h3>
                    <p>Use the present continuous tense (e.g., I am playing, Elsa is playing).</p>
                     <ul class="verb-questions">
                        <li>I am <input type="text" data-answer="learning" placeholder="..."> (learn) about schedules.</li>
                        <li>Leo is <input type="text" data-answer="drawing" placeholder="..."> (draw) a picture of a dragon.</li>
                        <li>Elsa is <input type="text" data-answer="baking" placeholder="..."> (bake) cookies with her mom.</li>
                        <li>We are <input type="text" data-answer="watching" placeholder="..."> (watch) a movie tonight.</li>
                        <li>They are <input type="text" data-answer="swimming" placeholder="..."> (swim) in the pool.</li>
                    </ul>
                </div>
            </div>
    
            <div class="verb-test-controls">
                <button class="nav-button" onclick="checkVerbAnswers()">Check My Answers</button>
                <div class="verb-test-results" id="verbTestResults"></div>
            </div>
        </div>

        <!-- Page 8: Completion & Summary -->
        <div class="page" id="page-8">
            <div class="page-header">
                <h1 class="page-title">üéâ Congratulations! Adventure Complete! üéâ</h1>
                <p>You've completed Leo & Elsa's Daily Schedule Adventure!</p>
            </div>

            <div class="characters">
                <div class="character clickable-tts" onclick="handleTTSClick(this, 'Congratulations! You did an amazing job learning with us!', 'Fenrir')">
                    <div class="character-avatar">üë¶</div>
                    <div class="character-name">Leo says: "Great job!"</div>
                </div>
                <div class="character clickable-tts" onclick="handleTTSClick(this, 'Thank you for joining our adventure! You learned so much!', 'Leda')">
                    <div class="character-avatar">üëß</div>
                    <div class="character-name">Elsa says: "Well done!"</div>
                </div>
            </div>

            <div class="completion-celebration">
                <div class="celebration-header">
                    <h2 class="celebration-title">üèÜ Your Learning Journey Summary üèÜ</h2>
                </div>
                
                <div class="achievement-grid">
                    <div class="achievement-card">
                        <div class="achievement-icon">üìÖ</div>
                        <div class="achievement-title">Schedule Master</div>
                        <div class="achievement-desc">Created a complete daily schedule</div>
                    </div>
                    <div class="achievement-card">
                        <div class="achievement-icon">üç≥</div>
                        <div class="achievement-title">Breakfast Expert</div>
                        <div class="achievement-desc">Planned healthy breakfast meals</div>
                    </div>
                    <div class="achievement-card">
                        <div class="achievement-icon">üç±</div>
                        <div class="achievement-title">Lunch Planner</div>
                        <div class="achievement-desc">Selected nutritious lunch options</div>
                    </div>
                    <div class="achievement-card">
                        <div class="achievement-icon">üçΩÔ∏è</div>
                        <div class="achievement-title">Dinner Designer</div>
                        <div class="achievement-desc">Chose delicious family dinners</div>
                    </div>
                    <div class="achievement-card">
                        <div class="achievement-icon">üé®</div>
                        <div class="achievement-title">Hobby Explorer</div>
                        <div class="achievement-desc">Discovered creative activities</div>
                    </div>
                    <div class="achievement-card">
                        <div class="achievement-icon">‚öΩ</div>
                        <div class="achievement-title">Sports Champion</div>
                        <div class="achievement-desc">Planned active Saturday fun</div>
                    </div>
                    <div class="achievement-card">
                        <div class="achievement-icon">üåû</div>
                        <div class="achievement-title">Sunday Specialist</div>
                        <div class="achievement-desc">Organized relaxing family time</div>
                    </div>
                    <div class="achievement-card">
                        <div class="achievement-icon">üó£Ô∏è</div>
                        <div class="achievement-title">Conversation Star</div>
                        <div class="achievement-desc">Practiced English conversations</div>
                    </div>
                </div>

                <div class="learning-stats">
                    <h3 class="stats-title">üìä Your Amazing Learning Stats</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number" id="wordsLearned">50+</div>
                            <div class="stat-label">Words Learned</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="conversationsCompleted">20+</div>
                            <div class="stat-label">Conversations</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="activitiesPlanned">100+</div>
                            <div class="stat-label">Activities Planned</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="trophiesEarned">7</div>
                            <div class="stat-label">Trophies Earned</div>
                        </div>
                    </div>
                </div>

                <div class="final-message">
                    <div class="message-content clickable-tts" onclick="handleTTSClick(this, 'Congratulations on completing Leo and Elsa daily schedule adventure! You have learned so much about daily routines, healthy eating, fun activities, and English conversation. You practiced vocabulary, created schedules, planned meals, and discovered new hobbies. Leo and Elsa are so proud of your hard work and dedication. Remember, learning English is a wonderful journey, and every day brings new opportunities to practice and grow. Keep exploring, keep learning, and keep having fun with English! You are amazing!', 'Kore')">
                        <h3>üåü A Special Message for You! üåü</h3>
                        <p>Congratulations on completing Leo & Elsa's Daily Schedule Adventure! You have learned so much about daily routines, healthy eating, fun activities, and English conversation.</p>
                        <p>You practiced vocabulary, created schedules, planned meals, and discovered new hobbies. Leo and Elsa are so proud of your hard work and dedication!</p>
                        <p>Remember, learning English is a wonderful journey, and every day brings new opportunities to practice and grow. Keep exploring, keep learning, and keep having fun with English!</p>
                        <p><strong>You are amazing! üåü</strong></p>
                    </div>
                </div>

                <div class="restart-section">
                    <h3>üîÑ Want to Play Again?</h3>
                    <button class="restart-button" onclick="restartAdventure()">
                        üéØ Start New Adventure
                    </button>
                    <button class="review-button" onclick="reviewJourney()">
                        üìñ Review My Journey
                    </button>
                </div>

                <div class="final-dialogue">
                    <div class="dialogue-header">üí¨ Final Words from Leo & Elsa</div>
                    <div class="detailed-dialogue">
                        <div class="dialogue-pair">
                            <div class="character-dialogue">
                                <div class="character-info">
                                    <span class="character-avatar">üë¶</span>
                                    <span class="character-name">Leo</span>
                                </div>
                                <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'Thank you for joining our adventure! You helped us create the perfect daily schedule. I learned that having a good routine makes every day special and organized. What was your favorite part of our journey together?', 'Fenrir')">
                                    <strong>Leo says:</strong> "Thank you for joining our adventure! You helped us create the perfect daily schedule. I learned that having a good routine makes every day special and organized. What was your favorite part of our journey together?"
                                </div>
                            </div>
                        </div>
                        
                        <div class="dialogue-pair">
                            <div class="character-dialogue">
                                <div class="character-info">
                                    <span class="character-avatar">üëß</span>
                                    <span class="character-name">Elsa</span>
                                </div>
                                <div class="dialogue-question clickable-tts" onclick="handleTTSClick(this, 'I had so much fun planning meals and activities with you! You showed us that learning can be exciting and interactive. I hope you will continue practicing English every day. Remember, the best way to learn is to have fun while doing it. Will you come back and visit us again soon?', 'Leda')">
                                    <strong>Elsa says:</strong> "I had so much fun planning meals and activities with you! You showed us that learning can be exciting and interactive. I hope you'll continue practicing English every day. Remember, the best way to learn is to have fun while doing it. Will you come back and visit us again soon?"
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <script>
        const pageFlow = [
            'learning-0', 'page-0',
            'learning-1', 'page-1',
            'learning-2', 'page-2',
            'learning-3', 'page-3',
            'learning-4', 'page-4',
            'learning-5', 'page-5',
            'learning-6', 'page-6',
            'learning-7', 'page-7',
            'page-verb-test',
            'page-8'
        ];
        let currentFlowIndex = 0;
        let earnedTrophies = 0;
        let activeTimers = {};
        let selectedItems = {
            breakfast: [], lunch: [], dinner: [], hobbies: [], saturday: [], sunday: []
        };
        const audioCache = {};
        let isSpeaking = false;
        let audioCtx; 

        // --- Gemini TTS Integration ---
        function base64ToArrayBuffer(base64) {
            const binaryString = window.atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        function pcmToWav(pcmData, numChannels, sampleRate) {
            const buffer = new ArrayBuffer(44 + pcmData.length * 2);
            const view = new DataView(buffer);
            view.setUint32(0, 0x52494646, false); // "RIFF"
            view.setUint32(4, 36 + pcmData.length * 2, true);
            view.setUint32(8, 0x57415645, false); // "WAVE"
            view.setUint32(12, 0x666d7420, false); // "fmt "
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * numChannels * 2, true);
            view.setUint16(32, numChannels * 2, true);
            view.setUint16(34, 16, true);
            view.setUint32(36, 0x64617461, false); // "data"
            view.setUint32(40, pcmData.length * 2, true);
            for (let i = 0; i < pcmData.length; i++) {
                view.setInt16(44 + i * 2, pcmData[i], true);
            }
            return new Blob([view], { type: 'audio/wav' });
        }

        async function speakText(text, voiceName = 'Kore', element = null) {
            if (isSpeaking) return;
            const cacheKey = `${text}|${voiceName}`;
            if (audioCache[cacheKey]) {
                new Audio(audioCache[cacheKey]).play();
                return;
            }
            isSpeaking = true;
            if (element) element.classList.add('speaking');
            try {
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{ parts: [{ text: text }] }],
                    generationConfig: {
                        responseModalities: ["AUDIO"],
                        speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: voiceName } } }
                    },
                    model: "gemini-2.5-flash-preview-tts"
                };
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                const result = await response.json();
                const part = result?.candidates?.[0]?.content?.parts?.[0];
                const audioData = part?.inlineData?.data;
                const mimeType = part?.inlineData?.mimeType;
                if (audioData && mimeType?.startsWith("audio/")) {
                    const sampleRate = parseInt(mimeType.match(/rate=(\d+)/)[1], 10);
                    const pcmData = base64ToArrayBuffer(audioData);
                    const pcm16 = new Int16Array(pcmData);
                    const wavBlob = pcmToWav(pcm16, 1, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);
                    audioCache[cacheKey] = audioUrl;
                    const audio = new Audio(audioUrl);
                    audio.play();
                    audio.onended = () => {
                        isSpeaking = false;
                        if (element) element.classList.remove('speaking');
                    };
                } else {
                    throw new Error("No audio data in API response.");
                }
            } catch (error) {
                console.error("Error with Text-to-Speech:", error);
                isSpeaking = false;
                if (element) element.classList.remove('speaking');
            }
        }
        // --- End of TTS Integration ---

        function playClickSound() {
            if (!audioCtx) {
                 audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);

            oscillator.start(audioCtx.currentTime);
            oscillator.stop(audioCtx.currentTime + 0.1);
        }

        function handleTTSClick(element, text, voice = 'Kore') {
            speakText(text, voice, element);
            createSoundEffect('üîä', element);
        }

        function handleCardClick(element, text, voice = 'Kore') {
            flashCard(element);
            speakText(text, voice, element);
        }

        function flashCard(card) {
            card.classList.add('flashing');
            setTimeout(() => card.classList.remove('flashing'), 500);
            createSoundEffect('‚ú®', card);
        }

        function createSoundEffect(emoji, target) {
            const effect = document.createElement('div');
            effect.className = 'sound-effect';
            effect.textContent = emoji;
            const rect = target.getBoundingClientRect();
            effect.style.left = `${rect.left + rect.width / 2}px`;
            effect.style.top = `${rect.top + rect.height / 2}px`;
            document.getElementById('soundEffects').appendChild(effect);
            setTimeout(() => effect.remove(), 1000);
        }

        function initializeDragAndDrop() {
            document.querySelectorAll('.word-item[draggable="true"]').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
            });
            document.querySelectorAll('.time-slot, .breakfast-plate').forEach(dropzone => {
                dropzone.addEventListener('dragover', handleDragOver);
                dropzone.addEventListener('drop', dropzone.classList.contains('time-slot') ? handleDrop : handleBreakfastDrop);
                dropzone.addEventListener('dragenter', handleDragEnter);
                dropzone.addEventListener('dragleave', handleDragLeave);
            });
        }

        function handleDragStart(e) {
            e.target.classList.add('dragging');
            if (e.target.dataset.activity) {
                e.dataTransfer.setData('text/plain', e.target.dataset.activity);
                e.dataTransfer.setData('type', 'activity');
            }
            if (e.target.dataset.food) {
                e.dataTransfer.setData('text/plain', e.target.dataset.food);
                e.dataTransfer.setData('type', 'food');
            }
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.target.closest('.time-slot, .breakfast-plate')?.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.target.closest('.time-slot, .breakfast-plate')?.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const timeSlot = e.target.closest('.time-slot');
            if (!timeSlot || e.dataTransfer.getData('type') !== 'activity') return;
            timeSlot.classList.remove('drag-over');
            const activity = e.dataTransfer.getData('text/plain');
            const wordItem = document.querySelector(`[data-activity="${activity}"]`);
            if (activity && wordItem) {
                timeSlot.querySelector('.activity-display').innerHTML = `<span>${wordItem.querySelector('span').textContent}</span> <span>${activity}</span>`;
                timeSlot.classList.add('filled');
                createSoundEffect('üéâ', timeSlot);
                earnTrophy();
                wordItem.style.opacity = '0.5';
                wordItem.draggable = false;
            }
        }

        function handleBreakfastDrop(e) {
            e.preventDefault();
            const plate = e.target.closest('.breakfast-plate');
            if (!plate || e.dataTransfer.getData('type') !== 'food') return;
            plate.classList.remove('drag-over');
            const food = e.dataTransfer.getData('text/plain');
            plate.querySelector('p')?.remove();
            const wordItem = document.querySelector(`[data-food="${food}"]`);
            if (wordItem) {
                const newItem = wordItem.cloneNode(true);
                newItem.draggable = false;
                newItem.style.cursor = 'default';
                plate.appendChild(newItem);
                createSoundEffect('üòã', plate);
                earnTrophy();
                wordItem.style.opacity = '0.5';
                wordItem.draggable = false;
            }
        }

        function handleSelection(item, itemName) {
            item.classList.toggle('selected');
            const pageType = getCurrentPageType();
            if (item.classList.contains('selected')) {
                selectedItems[pageType].push(itemName);
                createSoundEffect('‚ú®', item);
                handleTTSClick(item, itemName, 'Kore');
            } else {
                selectedItems[pageType] = selectedItems[pageType].filter(i => i !== itemName);
            }
            updateSelectionDisplay(pageType);
            earnTrophy();
        }

        function getCurrentPageType() {
            const viewId = pageFlow[currentFlowIndex];
            if (viewId.startsWith('page-')) {
                 const pageNum = parseInt(viewId.split('-')[1]);
                 const pageMap = { 2: 'breakfast', 3: 'lunch', 4: 'dinner', 5: 'hobbies', 6: 'saturday', 7: 'sunday' };
                 return pageMap[pageNum];
            }
            return null;
        }

        function restartAdventure() {
            currentFlowIndex = 0;
            earnedTrophies = 0;
            selectedItems = { breakfast: [], lunch: [], dinner: [], hobbies: [], saturday: [], sunday: [] };
            Object.values(activeTimers).forEach(timer => clearInterval(timer));
            activeTimers = {};
            document.querySelectorAll('.trophy').forEach(t => t.classList.remove('earned'));
            document.querySelectorAll('.selected').forEach(item => item.classList.remove('selected'));
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.classList.remove('filled');
                slot.querySelector('.activity-display').innerHTML = '';
            });
            document.querySelectorAll('.word-item[data-activity], .word-item[data-food]').forEach(item => {
                item.style.opacity = '1';
                item.draggable = true;
            });
            document.querySelectorAll('.breakfast-plate').forEach(p => p.innerHTML = `<p>Drag foods here for ${p.dataset.character}!</p>`);
            document.querySelectorAll('.selected-items .word-items').forEach(c => c.innerHTML = '');
            showCurrentView();
            createSoundEffect('üéØ', document.body);
            speakText('Starting a new adventure! Let us learn together again!', 'Kore');
        }

        function reviewJourney() {
            currentFlowIndex = pageFlow.indexOf('page-0');
            showCurrentView();
            createSoundEffect('üìñ', document.body);
            speakText('Let us review your amazing learning journey!', 'Kore');
        }

        function updateSelectionDisplay(pageType) {
            if(!pageType) return;
            const selectionContainer = document.getElementById(pageType + 'Selection');
            if (selectionContainer) {
                selectionContainer.innerHTML = selectedItems[pageType].map(item => `<div class="word-item">${item}</div>`).join('');
            }
        }

        function startTimer(phase, minutes, timerId) {
            if (activeTimers[timerId]) clearInterval(activeTimers[timerId]);
            let seconds = minutes * 60;
            const timerElement = document.getElementById(timerId);
            const button = timerElement.nextElementSibling;
            button.classList.add('active');
            button.textContent = 'Running...';
            activeTimers[timerId] = setInterval(() => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timerElement.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                if (seconds-- <= 0) {
                    clearInterval(activeTimers[timerId]);
                    button.classList.remove('active');
                    button.textContent = 'Start';
                    timerElement.textContent = `${minutes}:00`;
                    createSoundEffect('‚è∞', button);
                    speakText(`${phase} time is finished!`, 'Kore');
                    earnTrophy();
                }
            }, 1000);
        }

        function earnTrophy() {
            if (earnedTrophies < 7) {
                document.querySelectorAll('.trophy')[earnedTrophies++].classList.add('earned');
            }
        }

        function updateProgress() {
            let pagesCompleted = pageFlow.slice(0, currentFlowIndex + 1).filter(id => id.startsWith('page-')).length;
            const totalMainPages = pageFlow.filter(id => id.startsWith('page-')).length;
            const progress = (pagesCompleted / totalMainPages) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }


        function showCurrentView() {
            const viewId = pageFlow[currentFlowIndex];
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(viewId)?.classList.add('active');

            const isLearning = viewId.startsWith('learning-');
            document.getElementById('prevBtn').disabled = currentFlowIndex === 0;
            document.getElementById('nextBtn').disabled = currentFlowIndex === pageFlow.length - 1;

            updateProgress();
            if (isLearning) {
                startAutoLearning(viewId);
            } else if (viewId === 'page-1' || viewId === 'page-2') {
                setTimeout(initializeDragAndDrop, 100);
            }
        }

        function changePage(direction) {
            const newIndex = currentFlowIndex + direction;
            if (newIndex >= 0 && newIndex < pageFlow.length) {
                currentFlowIndex = newIndex;
                showCurrentView();
            }
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowLeft') changePage(-1);
            else if (e.key === 'ArrowRight') changePage(1);
        });

        function createFallingEmojis() {
            const emojis = ['üìö', '‚≠ê', 'üéØ', 'üåü', '‚ú®', 'üéâ', 'üèÜ', 'üí´', 'üåà', 'üé®'];
            const container = document.getElementById('fallingEmojis');
            setInterval(() => {
                const emoji = document.createElement('div');
                emoji.className = 'falling-emoji';
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = `${Math.random() * 100}%`;
                emoji.style.animationDuration = `${Math.random() * 3 + 5}s`;
                emoji.style.animationDelay = `${Math.random() * 2}s`;
                container.appendChild(emoji);
                setTimeout(() => emoji.remove(), 8000);
            }, 2000);
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            showCurrentView();
            createFallingEmojis();
             document.body.addEventListener('click', (e) => {
                if (e.target.matches('button')) {
                    playClickSound();
                }
            });
        });

        function startAutoLearning(viewId) {
            const learningPage = document.getElementById(viewId);
            const cards = learningPage.querySelectorAll('.learning-card');
            const pageNum = viewId.split('-')[1];
            let currentCardIndex = 0;
            const playNextCard = () => {
                if (currentCardIndex >= cards.length) {
                    setTimeout(() => changePage(1), 1000);
                    return;
                }
                const card = cards[currentCardIndex];
                cards.forEach(c => c.classList.remove('active-learning'));
                card.classList.add('active-learning');
                speakText(card.dataset.word, card.dataset.voice, card);
                const progressElement = document.getElementById(`learningProgress${pageNum}`);
                if (progressElement) progressElement.textContent = `${currentCardIndex + 1}/${cards.length}`;
                currentCardIndex++;
                setTimeout(playNextCard, 6000);
            };
            setTimeout(playNextCard, 1000);
        }

        function skipToPage(pageNum) {
            const targetViewId = `page-${pageNum}`;
            const targetIndex = pageFlow.indexOf(targetViewId);
            if (targetIndex !== -1) {
                currentFlowIndex = targetIndex;
                showCurrentView();
            }
        }

        function repeatLearning(pageNum) {
            startAutoLearning(`learning-${pageNum}`);
        }

        function checkVerbAnswers() {
            let correctAnswers = 0;
            const questions = document.querySelectorAll('#page-verb-test input[data-answer]');
            questions.forEach(input => {
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.dataset.answer.toLowerCase();
                input.classList.remove('correct', 'incorrect');
                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                    correctAnswers++;
                } else {
                    input.classList.add('incorrect');
                }
            });
            const resultsContainer = document.getElementById('verbTestResults');
            resultsContainer.textContent = `You got ${correctAnswers} out of ${questions.length} correct!`;
            if (correctAnswers === questions.length) {
                resultsContainer.textContent += ' üéâ Great job!';
                speakText('Wow, you got them all right! Great job!', 'Fenrir');
                earnTrophy();
            } else {
                 speakText(`You got ${correctAnswers} out of ${questions.length} correct. Keep practicing!`, 'Kore');
            }
        }
    </script>
</body>
</html>
