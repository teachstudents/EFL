<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DrillGen AI | Grade 10 Speaking Drills</title>
    
    <!-- 1. Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Load React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. Load Babel (to interpret JSX in the browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }
        body {
            overscroll-behavior: none; /* Prevent bounce on Mac */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (Converted from Lucide for Standalone use) ---
        const IconBase = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Play = ({ className }) => <IconBase className={className}><polygon points="5 3 19 12 5 21 5 3"/></IconBase>;
        const RotateCcw = ({ className }) => <IconBase className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></IconBase>;
        const Volume2 = ({ className }) => <IconBase className={className}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></IconBase>;
        const BookOpen = ({ className }) => <IconBase className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const Globe = ({ className }) => <IconBase className={className}><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></IconBase>;
        const BarChart = ({ className }) => <IconBase className={className}><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></IconBase>;
        const Sparkles = ({ className }) => <IconBase className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></IconBase>;
        const Copy = ({ className }) => <IconBase className={className}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const Check = ({ className }) => <IconBase className={className}><polyline points="20 6 9 17 4 12"/></IconBase>;
        const MessageSquare = ({ className }) => <IconBase className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></IconBase>;
        const AlertCircle = ({ className }) => <IconBase className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></IconBase>;
        const Quote = ({ className }) => <IconBase className={className}><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/></IconBase>;
        const LinkIcon = ({ className }) => <IconBase className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></IconBase>;

        // --- DATA CONSTANTS ---

        const GRAMMAR_POINTS = [
            "Present Simple", "Present Continuous", "Past Simple", "Past Continuous",
            "Present Perfect", "Future (will/going to)", "Comparatives/Superlatives",
            "Conditionals", "Modal Verbs", "Reported Speech"
        ];

        const TOPICS = [
            "School", "Technology", "Future Plans", "Friendship", "Travel", 
            "Environment", "Hobbies", "Family", "Health", "Money"
        ];

        const LEVELS = [
            { label: "A1/A2 (Beginner)", value: "A1-A2", color: "bg-green-100 text-green-800 border-green-200" },
            { label: "B1/B2 (Intermediate)", value: "B1-B2", color: "bg-blue-100 text-blue-800 border-blue-200" },
            { label: "C1/C2 (Advanced)", value: "C1-C2", color: "bg-purple-100 text-purple-800 border-purple-200" }
        ];

        // --- DATA ---
        // (Full Hardcoded Data as requested)

        const QUESTION_DB = {
          "School": {
            "Present Simple": {
              "A1-A2": [
                { q: "What time does school start?", s: "It usually starts at..." },
                { q: "How do you get to school?", s: "I usually go by..." },
                { q: "Do you wear a uniform?", s: "Yes, we have to wear..." },
                { q: "Who do you sit next to in class?", s: "I sit next to..." },
                { q: "Do you have a favorite teacher?", s: "My favorite teacher is..." },
                { q: "What is your favorite subject?", s: "I really enjoy..." },
                { q: "Do you study English every day?", s: "Yes, I study it..." },
                { q: "Do you have a lot of homework?", s: "Honestly, I have..." },
                { q: "Does your school have a library?", s: "Yes, there is a..." },
                { q: "Do you like your school?", s: "Yes, I like it because..." }
              ],
              "B1-B2": [
                { q: "What are the main rules at your school?", s: "The most important rule is..." },
                { q: "What routine do you follow after school?", s: "When I get home, I..." },
                { q: "Do you prefer studying alone or in groups?", s: "I generally prefer..." },
                { q: "What subject do you find the most challenging?", s: "I find [Subject] difficult because..." },
                { q: "How do you handle exam stress?", s: "To manage stress, I usually..." },
                { q: "Does your school offer enough extracurricular activities?", s: "I think there are plenty of..." },
                { q: "How often do you participate in class discussions?", s: "I try to participate when..." },
                { q: "What makes a teacher 'good' in your opinion?", s: "A good teacher should be..." },
                { q: "Do students generally respect the teachers here?", s: "Most students represent..." },
                { q: "Do you think school uniforms are a good idea?", s: "In my opinion, uniforms are..." }
              ],
              "C1-C2": [
                { q: "What role does technology play in modern classrooms?", s: "Technology has revolutionized..." },
                { q: "How does peer pressure influence student behavior?", s: "Peer pressure often causes..." },
                { q: "Is the relationship between teachers and students changing?", s: "Nowadays, the relationship is..." },
                { q: "Does the school environment foster true creativity?", s: "To some extent, but..." },
                { q: "Do schools focus enough on mental health?", s: "Unfortunately, schools often ignore..." },
                { q: "To what extent does the curriculum prepare students for the real world?", s: "I believe the curriculum is..." },
                { q: "Do you believe standardized testing is an accurate measure of intelligence?", s: "I would argue that testing is..." },
                { q: "Is academic success the only indicator of potential?", s: "Definitely not, because..." },
                { q: "Is university education necessary for success?", s: "It depends on the career, but..." },
                { q: "What fundamental changes does the education system need?", s: "The system urgently needs to..." }
              ]
            },
            "Future (will/going to)": {
              "B1-B2": [
                { q: "What are your academic goals for next term?", s: "My main goal is to..." },
                { q: "How will you prepare for your final exams?", s: "I am going to start by..." },
                { q: "What subjects are you going to choose next year?", s: "I have decided to choose..." },
                { q: "Are you going to join any clubs next semester?", s: "I'm thinking about joining..." },
                { q: "Where are you going to go for the school trip?", s: "We are going to visit..." },
                { q: "What are you going to study after high school?", s: "I am planning to study..." },
                { q: "Will you take a gap year before university?", s: "I probably won't because..." },
                { q: "Will you keep in touch with your school friends?", s: "I definitely will because..." },
                { q: "Do you think robots will replace teachers?", s: "It is unlikely that robots will..." },
                { q: "Do you think school will be different in the future?", s: "I predict that schools will..." }
              ]
            }
          },
          "Technology": {
            "Present Simple": {
              "B1-B2": [
                { q: "What gadgets do you use every day?", s: "Apart from my phone, I use..." },
                { q: "How often do you use your smartphone?", s: "I use it constantly to..." },
                { q: "What apps do you use for studying?", s: "I mainly use..." },
                { q: "Do you prefer reading e-books or physical books?", s: "I prefer physical books because..." },
                { q: "Do you play video games often?", s: "I play occasionally when..." },
                { q: "Does your family have rules about screen time?", s: "We have a rule that..." },
                { q: "Do you trust news you see on the internet?", s: "I am skeptical about..." },
                { q: "Does technology help you or distract you?", s: "It helps me, but sometimes..." },
                { q: "How does technology affect your sleep?", s: "If I use my phone at night, I..." },
                { q: "Do you think social media is addictive?", s: "Yes, it can be addictive because..." }
              ]
            },
            "Present Perfect": {
              "B1-B2": [
                { q: "Have you ever lost your phone?", s: "Fortunately, I have never..." },
                { q: "Have you ever bought something online?", s: "Yes, I have bought..." },
                { q: "What is the best app you have downloaded recently?", s: "The most useful app has been..." },
                { q: "Have you ever tried coding?", s: "I have tried it once, and..." },
                { q: "Have you learned a new skill using the internet?", s: "Recently, I have learned..." },
                { q: "How have smartphones improved over the years?", s: "They have become much more..." },
                { q: "Have you ever been a victim of cyberbullying?", s: "I haven't, but I know people who..." },
                { q: "Has social media made people less social?", s: "It has definitely changed how we..." },
                { q: "How has technology changed your life?", s: "It has made my life..." },
                { q: "What has been the biggest tech invention of the decade?", s: "I think AI has been..." }
              ]
            }
          },
          "Future Plans": {
            "Future (will/going to)": {
              "B1-B2": [
                { q: "What are you going to do when you graduate?", s: "I am going to..." },
                { q: "Are you going to get a job or go to university?", s: "I plan to go to university for..." },
                { q: "What career are you going to pursue?", s: "I am going to pursue a career in..." },
                { q: "What skills will you need for your dream job?", s: "I will need to be good at..." },
                { q: "Will you learn another language?", s: "I might learn..." },
                { q: "Do you think it will be hard to find a job?", s: "It will probably be difficult because..." },
                { q: "Are you going to move to another city?", s: "I am definitely going to..." },
                { q: "Will you travel before starting your career?", s: "I hope to travel to..." },
                { q: "Do you think you will have the same friends in the future?", s: "I think I will keep..." },
                { q: "Where do you think you will live in 10 years?", s: "I imagine I will live in..." }
              ]
            }
          }
        };

        const GENERAL_BACKUP = {
          "Present Simple": [
            { q: "Tell me about your daily routine regarding this topic.", s: "Every day, I usually..." },
            { q: "How does this topic affect your everyday life?", s: "It affects me by..." },
            { q: "Do you generally enjoy dealing with this topic?", s: "To be honest, I..." },
            { q: "What is the most important fact about this topic?", s: "The key thing to know is..." },
            { q: "Do you prefer talking about this or something else?", s: "I prefer discussing this because..." },
            { q: "What usually happens when you discuss this topic?", s: "People usually disagree about..." },
            { q: "Does this topic interest your friends?", s: "My friends are interested in it because..." },
            { q: "Do people in your country care about this topic?", s: "Yes, it is very popular because..." },
            { q: "Why do you think this topic is popular?", s: "It is popular due to..." },
            { q: "Do you have a strong opinion on this?", s: "My opinion is that..." }
          ],
          "Present Continuous": [
            { q: "What is happening with this topic right now?", s: "Currently, we are seeing..." },
            { q: "Are you learning anything new about this at the moment?", s: "I am currently learning..." },
            { q: "What are you doing to understand this better?", s: "I am trying to..." },
            { q: "Are you spending time on this topic this week?", s: "This week, I am..." },
            { q: "Are people paying more attention to this these days?", s: "Yes, people are focusing on..." },
            { q: "Why is everyone talking about this currently?", s: "Everyone is discussing it because..." },
            { q: "Are your friends discussing this topic these days?", s: "We are talking about it because..." },
            { q: "Is this trend becoming more popular or less popular?", s: "It is definitely becoming..." },
            { q: "Is the situation improving or getting worse?", s: "Unfortunately, it is getting..." },
            { q: "What changes are we seeing in this area?", s: "We are noticing that..." }
          ],
          "Past Simple": [
            { q: "Did you enjoy this topic when you were a child?", s: "As a child, I really..." },
            { q: "Did you learn about this in primary school?", s: "We learned a little about..." },
            { q: "When was the last time you thought about this?", s: "I thought about it when..." },
            { q: "What happened the last time you dealt with this?", s: "The last time, I..." },
            { q: "Did you have a bad experience with this recently?", s: "I had a difficult time when..." },
            { q: "What was the best moment you had related to this?", s: "The best moment was when..." },
            { q: "Did you read any news about this yesterday?", s: "I read an article that said..." },
            { q: "Why did you choose to talk about this?", s: "I chose this because..." },
            { q: "Was this topic important to your parents?", s: "My parents felt that..." },
            { q: "How did people handle this 50 years ago?", s: "In the past, people used to..." }
          ],
          "Present Perfect": [
            { q: "How long have you been interested in this?", s: "I have been interested since..." },
            { q: "Have you ever experienced this personally?", s: "I have experienced this once when..." },
            { q: "Have you learned anything surprising about this recently?", s: "I have recently discovered that..." },
            { q: "Have you ever discussed this with a teacher?", s: "I have talked to my teacher about..." },
            { q: "What have you achieved regarding this topic?", s: "I have successfully..." },
            { q: "Has this ever caused a problem for you?", s: "It has caused issues when..." },
            { q: "Has anyone ever asked you about this before?", s: "People have asked me about..." },
            { q: "Have you ever changed your mind about this?", s: "I have changed my opinion because..." },
            { q: "What is the best advice you have received about this?", s: "The best advice I have received is..." },
            { q: "How has this topic changed over the years?", s: "It has changed significantly because..." }
          ],
          "Future (will/going to)": [
            { q: "Are you going to focus more on this soon?", s: "I am going to focus on it when..." },
            { q: "What are you going to do about this next year?", s: "Next year, I am going to..." },
            { q: "Are you going to study this in university?", s: "I am planning to study..." },
            { q: "Will this affect your future career?", s: "It will affect my career by..." },
            { q: "Do you think people will still care about this?", s: "People will definitely still..." },
            { q: "Do you think this will be important in the future?", s: "I think it will be crucial because..." },
            { q: "How will this change in the next 10 years?", s: "In a decade, it will..." },
            { q: "What prediction can you make about this?", s: "I predict that..." },
            { q: "What will happen if we ignore this topic?", s: "If we ignore it, then..." },
            { q: "Where will you be when you encounter this again?", s: "I will probably be at..." }
          ],
          "Conditionals": [
            { q: "If you had more time, would you focus on this?", s: "I would definitely focus on it if..." },
            { q: "If you could change one thing about this, what would it be?", s: "If I could change one thing, I would..." },
            { q: "If you were in charge, how would you manage this?", s: "I would manage it by..." },
            { q: "What would you do if you were an expert on this?", s: "I would teach people how to..." },
            { q: "If you could explain this to a child, what would you say?", s: "I would simply say that..." },
            { q: "If you were famous, would you use your platform for this?", s: "I would use my fame to..." },
            { q: "If this disappeared tomorrow, would it matter?", s: "It would matter a lot because..." },
            { q: "What happens if you don't pay attention to this?", s: "If you don't pay attention, you..." },
            { q: "Unless we act now, what might happen?", s: "Unless we act, there might be..." },
            { q: "If you had known more about this earlier, would it help?", s: "It would have helped me to..." }
          ],
          "Modal Verbs": [
            { q: "Can you explain the main benefits?", s: "The main benefits can be seen in..." },
            { q: "How can students improve their understanding of this?", s: "Students can improve by..." },
            { q: "What should people do regarding this?", s: "People really should..." },
            { q: "Who should be responsible for this?", s: "I think [Person/Group] should be..." },
            { q: "Why must we be careful about this?", s: "We must be careful because..." },
            { q: "What ought to be done to solve problems here?", s: "We ought to focus on..." },
            { q: "Should the government get involved in this?", s: "The government should intervene to..." },
            { q: "Why shouldn't we ignore this issue?", s: "We shouldn't ignore it because..." },
            { q: "Could you live without this?", s: "I could probably live without it, but..." },
            { q: "What might happen if we ignore the rules?", s: "It might lead to..." }
          ],
          "Comparatives/Superlatives": [
            { q: "What is the best thing about this?", s: "The best thing is clearly..." },
            { q: "What is the biggest challenge here?", s: "The biggest challenge is undoubtedly..." },
            { q: "Is this more important than other topics?", s: "It is more important because..." },
            { q: "Is it better to do this alone or with friends?", s: "It is much better to do it with..." },
            { q: "Is this less interesting than you thought?", s: "It is actually more interesting than..." },
            { q: "Is it harder to understand this now than before?", s: "It is harder now because..." },
            { q: "Is it easier to handle this today than in the past?", s: "It is easier today thanks to..." },
            { q: "Is this the most popular topic in your school?", s: "It is one of the most popular because..." },
            { q: "What is the most dangerous aspect of this?", s: "The most dangerous part is..." },
            { q: "What is the worst mistake people make regarding this?", s: "The worst mistake is..." }
          ],
          "Reported Speech": [
            { q: "What did your teacher tell you about this?", s: "My teacher told me that..." },
            { q: "Who told you about this initially?", s: "My friend told me that..." },
            { q: "Have you heard what people are saying?", s: "I heard that people are..." },
            { q: "Did anyone say that this was important?", s: "They said that it was..." },
            { q: "Did your parents tell you to be careful?", s: "My parents told me to..." },
            { q: "Did the news mention anything about this?", s: "The news mentioned that..." },
            { q: "What have scientists reported about this?", s: "Scientists reported that..." },
            { q: "Did they promise that this would improve?", s: "They promised that it would..." },
            { q: "What did you say when asked about this?", s: "I said that I was..." },
            { q: "What would you tell a friend about this?", s: "I would tell them that..." }
          ],
          "Past Continuous": [
            { q: "What were you doing when you first noticed this?", s: "I was [Doing Action] when I..." },
            { q: "What was happening in the world at that time?", s: "At that time, the world was..." },
            { q: "Were people talking about this last year?", s: "Yes, everyone was talking about..." },
            { q: "Was this trend growing when you were younger?", s: "It was growing rapidly while..." },
            { q: "Who was influencing your opinion back then?", s: "My friends were influencing me while..." },
            { q: "Were your friends participating in this?", s: "They were participating while..." },
            { q: "While you were studying, did you think of this?", s: "While I was studying, I realized..." },
            { q: "Were you expecting this to happen?", s: "I wasn't expecting it while..." },
            { q: "What were you hoping to achieve?", s: "I was hoping to..." },
            { q: "Was it raining when you experienced this?", s: "It was raining while I..." }
          ]
        };

        const SUPPORT_KITS = {
          "School": {
            vocab: ["curriculum", "detention", "deadline", "academic", "peer pressure", "extracurricular", "achievement", "literacy", "compulsory", "attendance", "faculty", "semester"],
            phrases: ["cram for an exam", "pass with flying colors", "teacher's pet", "skip class", "hit the books", "drop a subject", "learn by heart"],
            connectors: ["Furthermore", "Consequently", "However", "In addition", "Therefore"]
          },
          "Technology": {
            vocab: ["AI", "innovation", "privacy", "digital footprint", "algorithm", "automation", "device", "cybersecurity", "virtual reality", "glitch", "platform", "interface"],
            phrases: ["glue to the screen", "surf the net", "go viral", "tech-savvy", "crash the system", "cutting-edge", "reboot the system"],
            connectors: ["Moreover", "Nevertheless", "As a result", "On the other hand", "Similarly"]
          },
          "Future Plans": {
            vocab: ["ambition", "career path", "qualification", "apprenticeship", "gap year", "independence", "salary", "internship", "promotion", "resume", "goal", "opportunity"],
            phrases: ["climb the ladder", "think outside the box", "make a living", "land a job", "pursue a dream", "dead-end job", "calling in life"],
            connectors: ["Eventually", "Ultimately", "In the long run", "Provided that", "Unless"]
          },
          "Friendship": {
            vocab: ["loyalty", "conflict", "trust", "supportive", "acquaintance", "bond", "social circle", "betrayal", "reconciliation", "companion", "influence", "shared interests"],
            phrases: ["shoulder to cry on", "through thick and thin", "fair-weather friend", "hit it off", "drift apart", "close-knit", "keep in touch"],
            connectors: ["Besides", "Equally", "In contrast", "For instance", "Above all"]
          },
          "Travel": {
            vocab: ["itinerary", "culture shock", "destination", "accommodation", "souvenir", "memorable", "foreign", "excursion", "backpacking", "sightseeing", "local", "transit"],
            phrases: ["off the beaten track", "travel light", "hit the road", "live out of a suitcase", "broaden horizons", "book in advance", "catch a flight"],
            connectors: ["Meanwhile", "Consequently", "Despite", "Although", "Whereas"]
          },
          "Environment": {
            vocab: ["sustainability", "climate change", "recycle", "pollution", "conservation", "ecosystem", "renewable", "carbon footprint", "global warming", "habitat", "extinction", "biodiversity"],
            phrases: ["go green", "reduce, reuse, recycle", "fossil fuels", "natural disaster", "eco-friendly", "solar power", "tipping point"],
            connectors: ["Hence", "Thus", "Consequently", "Nevertheless", "Furthermore"]
          },
          "Hobbies": {
            vocab: ["passion", "creativity", "leisure", "technique", "practice", "relaxing", "skill", "pastime", "amateur", "dedication", "competition", "collection"],
            phrases: ["take up a hobby", "blow off steam", "hone a skill", "recharge batteries", "spare time", "keen on", "get into"],
            connectors: ["Additionally", "Likewise", "For example", "In fact", "Specifically"]
          },
          "Family": {
            vocab: ["generation gap", "upbringing", "values", "relatives", "support", "tradition", "siblings", "ancestors", "household", "bond", "marriage", "inherit"],
            phrases: ["black sheep", "runs in the family", "flesh and blood", "look up to", "take after", "bring up", "get along with"],
            connectors: ["Similarly", "Conversely", "Moreover", "On the contrary", "In conclusion"]
          },
          "Health": {
            vocab: ["nutrition", "mental health", "well-being", "exercise", "diet", "immunity", "lifestyle", "diagnosis", "symptom", "therapy", "recovery", "prescription"],
            phrases: ["clean bill of health", "under the weather", "fit as a fiddle", "kick the habit", "balanced diet", "check-up", "work out"],
            connectors: ["Therefore", "However", "In addition", "Despite this", "Consequently"]
          },
          "Money": {
            vocab: ["budget", "savings", "debt", "investment", "allowance", "expensive", "consumer", "currency", "bargain", "profit", "salary", "expense"],
            phrases: ["make ends meet", "cost an arm and a leg", "save for a rainy day", "rip-off", "splurge on", "tighten the belt", "money doesn't grow on trees"],
            connectors: ["Consequently", "Furthermore", "In contrast", "Therefore", "Ideally"]
          }
        };

        // --- COMPONENT LOGIC ---

        function SpeakingDrillApp() {
          const [step, setStep] = useState(1);
          const [loading, setLoading] = useState(false);
          
          const [selectedGrammar, setSelectedGrammar] = useState("");
          const [selectedTopic, setSelectedTopic] = useState("");
          const [selectedLevel, setSelectedLevel] = useState("");
          
          const [questions, setQuestions] = useState([]);
          const [isBackup, setIsBackup] = useState(false);
          const [copiedIndex, setCopiedIndex] = useState(null);

          const generateQuestions = () => {
            setLoading(true);
            setTimeout(() => {
              let generated = [];
              let usedBackup = false;

              // 1. Try specific DB
              if (
                QUESTION_DB[selectedTopic] &&
                QUESTION_DB[selectedTopic][selectedGrammar] &&
                QUESTION_DB[selectedTopic][selectedGrammar][selectedLevel]
              ) {
                generated = QUESTION_DB[selectedTopic][selectedGrammar][selectedLevel];
              } 
              // 2. Fallback to General
              else if (GENERAL_BACKUP[selectedGrammar]) {
                generated = GENERAL_BACKUP[selectedGrammar];
                usedBackup = true;
              } else {
                generated = [{ q: "Error: Selection not found.", s: "" }];
              }

              setQuestions(generated);
              setIsBackup(usedBackup);
              setStep(2);
              setLoading(false);
            }, 400);
          };

          const speakText = (text) => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
              const utterance = new SpeechSynthesisUtterance(text);
              utterance.lang = 'en-US';
              utterance.rate = 0.85; 
              utterance.pitch = 1;
              window.speechSynthesis.speak(utterance);
            }
          };

          const copyToClipboard = (text, index) => {
            navigator.clipboard.writeText(text);
            setCopiedIndex(index);
            setTimeout(() => setCopiedIndex(null), 2000);
          };

          const handleReset = () => {
            setStep(1);
            setQuestions([]);
            setIsBackup(false);
          };

          const getLevelColor = (val) => {
            const found = LEVELS.find(l => l.value === val);
            return found ? found.color : "bg-gray-100";
          };

          return (
            <div className="h-screen flex flex-col bg-slate-50 font-sans text-slate-800 overflow-hidden">
              
              {/* Header */}
              <div className="bg-white border-b border-slate-200 px-4 py-2 flex items-center justify-between shrink-0 h-12">
                <div className="flex items-center gap-2">
                  <Sparkles className="w-4 h-4 text-indigo-600" />
                  <span className="font-bold text-slate-900 text-sm">DrillGen <span className="text-slate-500 font-normal">| Grade 10</span></span>
                </div>
                {step === 2 && (
                   <button 
                     onClick={handleReset}
                     className="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 px-3 py-1.5 rounded-full flex items-center gap-1 font-medium transition-colors"
                   >
                     <RotateCcw className="w-3 h-3" /> New Drill
                   </button>
                )}
              </div>

              <main className="flex-1 flex flex-col p-3 overflow-hidden">
                
                {/* STEP 1: DASHBOARD */}
                {step === 1 && (
                  <div className="flex-1 flex flex-col gap-3 h-full">
                    <div className="flex-1 grid grid-cols-3 gap-3 min-h-0">
                      
                      {/* COL 1: GRAMMAR */}
                      <div className="bg-white rounded-xl border border-slate-200 flex flex-col overflow-hidden shadow-sm">
                        <div className="bg-indigo-50 px-3 py-2 border-b border-indigo-100 flex items-center gap-2 shrink-0">
                          <BookOpen className="w-4 h-4 text-indigo-600" />
                          <span className="font-bold text-xs text-indigo-800 uppercase tracking-wider">Grammar</span>
                        </div>
                        <div className="p-2 overflow-y-auto space-y-1">
                          {GRAMMAR_POINTS.map((g) => (
                            <button
                              key={g}
                              onClick={() => setSelectedGrammar(g)}
                              className={`w-full text-left px-3 py-2.5 rounded-lg text-xs font-medium transition-all truncate ${
                                selectedGrammar === g 
                                  ? 'bg-indigo-600 text-white shadow-md' 
                                  : 'bg-slate-50 text-slate-600 hover:bg-indigo-50 hover:text-indigo-700'
                              }`}
                            >
                              {g}
                            </button>
                          ))}
                        </div>
                      </div>

                      {/* COL 2: TOPICS */}
                      <div className="bg-white rounded-xl border border-slate-200 flex flex-col overflow-hidden shadow-sm">
                        <div className="bg-pink-50 px-3 py-2 border-b border-pink-100 flex items-center gap-2 shrink-0">
                          <Globe className="w-4 h-4 text-pink-600" />
                          <span className="font-bold text-xs text-pink-800 uppercase tracking-wider">Topic</span>
                        </div>
                        <div className="p-2 overflow-y-auto grid grid-cols-1 gap-1 content-start">
                          {TOPICS.map((t) => (
                            <button
                              key={t}
                              onClick={() => setSelectedTopic(t)}
                              className={`text-left px-3 py-2.5 rounded-lg text-xs font-medium transition-all truncate ${
                                selectedTopic === t 
                                  ? 'bg-pink-600 text-white shadow-md' 
                                  : 'bg-slate-50 text-slate-600 hover:bg-pink-50 hover:text-pink-700'
                              }`}
                            >
                              {t}
                            </button>
                          ))}
                        </div>
                      </div>

                      {/* COL 3: LEVELS */}
                      <div className="bg-white rounded-xl border border-slate-200 flex flex-col overflow-hidden shadow-sm">
                        <div className="bg-emerald-50 px-3 py-2 border-b border-emerald-100 flex items-center gap-2 shrink-0">
                          <BarChart className="w-4 h-4 text-emerald-600" />
                          <span className="font-bold text-xs text-emerald-800 uppercase tracking-wider">Level</span>
                        </div>
                        <div className="p-2 space-y-2">
                          {LEVELS.map((l) => (
                            <button
                              key={l.value}
                              onClick={() => setSelectedLevel(l.value)}
                              className={`w-full text-left px-3 py-3 rounded-lg text-xs font-medium border transition-all ${
                                selectedLevel === l.value 
                                  ? `${l.color} border-current shadow-md ring-1 ring-offset-1 ring-current` 
                                  : 'bg-white border-slate-200 text-slate-600 hover:border-emerald-300'
                              }`}
                            >
                              <div className="font-bold">{l.value}</div>
                              <div className="text-[10px] opacity-75">{l.label.split('(')[1].replace(')', '')}</div>
                            </button>
                          ))}
                        </div>
                      </div>
                    </div>

                    <button
                      onClick={generateQuestions}
                      disabled={!selectedGrammar || !selectedTopic || !selectedLevel || loading}
                      className={`shrink-0 w-full py-3.5 rounded-xl text-sm font-bold shadow-lg flex items-center justify-center gap-2 transition-all transform active:scale-[0.99] ${
                        !selectedGrammar || !selectedTopic || !selectedLevel 
                          ? 'bg-slate-200 text-slate-400 cursor-not-allowed' 
                          : 'bg-slate-900 text-white hover:bg-slate-800'
                      }`}
                    >
                      {loading ? "Fetching Questions..." : "Open Drill"} <Play className="w-3 h-3 fill-current" />
                    </button>
                  </div>
                )}

                {/* STEP 2: RESULTS SCREEN */}
                {step === 2 && (
                  <div className="flex-1 flex flex-col gap-3 h-full overflow-hidden">
                    
                    {/* Top Bar */}
                    <div className="flex items-center justify-between shrink-0 bg-white p-2 rounded-lg border border-slate-200 shadow-sm">
                      <div className="flex items-center gap-2">
                        <span className="px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-[10px] font-bold uppercase">{selectedGrammar}</span>
                        <span className="text-slate-300">/</span>
                        <span className="px-2 py-0.5 bg-pink-100 text-pink-700 rounded text-[10px] font-bold uppercase">{selectedTopic}</span>
                        <span className="text-slate-300">/</span>
                        <span className={`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${getLevelColor(selectedLevel)}`}>{selectedLevel}</span>
                      </div>
                      {isBackup && (
                        <div className="flex items-center gap-1 text-[10px] text-amber-600 bg-amber-50 px-2 py-0.5 rounded-full border border-amber-200">
                          <AlertCircle className="w-3 h-3" />
                          <span>General {selectedGrammar} Set</span>
                        </div>
                      )}
                    </div>

                    <div className="flex-1 grid grid-cols-3 gap-3 min-h-0">
                      
                      {/* Questions Area (Left 2/3) */}
                      <div className="col-span-2 overflow-y-auto space-y-3 pr-1 custom-scrollbar pb-20">
                         {questions.map((item, idx) => (
                          <div key={idx} className="bg-white rounded-xl p-3 shadow-sm border border-slate-200 flex gap-3 hover:border-indigo-300 transition-colors group">
                            
                            {/* Number */}
                            <div className="bg-indigo-50 text-indigo-600 font-bold w-5 h-5 text-[10px] rounded-full flex items-center justify-center shrink-0 mt-0.5">
                              {idx + 1}
                            </div>

                            {/* Question Content */}
                            <div className="flex-1 flex flex-col">
                              <p className="text-sm font-medium text-slate-800 leading-snug mb-2">
                                {item.q}
                              </p>
                              
                              {/* Integrated Sentence Starter */}
                              <div className="flex items-center gap-1.5">
                                <Quote className="w-3 h-3 text-indigo-300 transform scale-x-[-1]" />
                                <span className="text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-md border border-indigo-100">
                                  {item.s} <span className="opacity-50">...</span>
                                </span>
                              </div>
                            </div>

                            {/* Buttons */}
                            <div className="flex flex-col gap-1 opacity-60 group-hover:opacity-100 transition-opacity">
                              <button 
                                onClick={() => speakText(item.q)} 
                                className="p-1.5 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50"
                                title="Listen (Slow)"
                              >
                                <Volume2 className="w-4 h-4" />
                              </button>
                              <button 
                                onClick={() => copyToClipboard(item.q, idx)} 
                                className="p-1.5 rounded-md text-slate-400 hover:text-emerald-600 hover:bg-emerald-50"
                                title="Copy"
                              >
                                 {copiedIndex === idx ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                              </button>
                            </div>
                          </div>
                        ))}
                      </div>

                      {/* Expanded Support Kit (Right 1/3) */}
                      <div className="col-span-1 bg-slate-800 rounded-xl text-white overflow-hidden flex flex-col shadow-inner">
                        
                        {/* Header */}
                        <div className="bg-slate-900 px-3 py-2 border-b border-slate-700 flex items-center gap-2">
                          <BookOpen className="w-3 h-3 text-yellow-400" />
                          <span className="text-[10px] font-bold uppercase tracking-wider text-slate-300">Topic Support Kit</span>
                        </div>

                        <div className="overflow-y-auto p-3 space-y-5 custom-scrollbar pb-20">
                          
                          {/* Topic Vocab */}
                          <div className="space-y-2">
                            <h4 className="text-[10px] font-bold uppercase tracking-wider text-pink-300 flex items-center gap-1 border-b border-slate-700 pb-1">
                              <Globe className="w-3 h-3" /> Vocabulary
                            </h4>
                            <div className="flex flex-wrap gap-1.5">
                              {SUPPORT_KITS[selectedTopic] ? (
                                SUPPORT_KITS[selectedTopic].vocab.map((word, i) => (
                                  <span key={i} className="bg-slate-700 hover:bg-slate-600 transition-colors px-1.5 py-0.5 rounded text-[10px] text-slate-200 border border-slate-600 cursor-default">
                                    {word}
                                  </span>
                                ))
                              ) : <span className="text-xs text-slate-500">N/A</span>}
                            </div>
                          </div>

                          {/* Essential Phrases */}
                          <div className="space-y-2">
                            <h4 className="text-[10px] font-bold uppercase tracking-wider text-emerald-300 flex items-center gap-1 border-b border-slate-700 pb-1">
                              <MessageSquare className="w-3 h-3" /> Essential Phrases
                            </h4>
                            <ul className="space-y-1">
                              {SUPPORT_KITS[selectedTopic] ? (
                                SUPPORT_KITS[selectedTopic].phrases.map((phrase, i) => (
                                  <li key={i} className="text-[10px] text-slate-300 flex gap-2">
                                    <span className="text-emerald-500">â€¢</span>
                                    {phrase}
                                  </li>
                                ))
                              ) : <span className="text-xs text-slate-500">N/A</span>}
                            </ul>
                          </div>

                          {/* Connectors */}
                          <div className="space-y-2">
                            <h4 className="text-[10px] font-bold uppercase tracking-wider text-indigo-300 flex items-center gap-1 border-b border-slate-700 pb-1">
                              <LinkIcon className="w-3 h-3" /> Connectors
                            </h4>
                            <div className="flex flex-wrap gap-1.5">
                              {SUPPORT_KITS[selectedTopic] ? (
                                SUPPORT_KITS[selectedTopic].connectors.map((word, i) => (
                                  <span key={i} className="bg-indigo-900/50 hover:bg-indigo-800 transition-colors px-1.5 py-0.5 rounded text-[10px] text-indigo-200 border border-indigo-800 cursor-default">
                                    {word}
                                  </span>
                                ))
                              ) : <span className="text-xs text-slate-500">N/A</span>}
                            </div>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                )}
              </main>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SpeakingDrillApp />);
    </script>
</body>
</html>
